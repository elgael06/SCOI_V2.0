"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},Cabecera=function(n){function t(){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("div",{style:{width:"400px",display:"inline-block",marginTop:"10px"},className:"form-group"},React.createElement("span",{className:"glyphicon glyphicon-tasks"},React.createElement("label",{style:{marginLeft:"5px"}},"ESTABLECIMIENTO:")),React.createElement("select",{className:"form-control",onChange:this.props.on_establecimiento},React.createElement("option",{value:"-1"},"SELECCIONAR..."),this.establecimientos())),React.createElement("a",{className:"btn-success btn",style:{marginLeft:"5px",borderRadius:"5px"},onClick:this.props.revisar},React.createElement("span",{className:"fa fa-pencil-square-o"}," ")))}},{key:"establecimientos",value:function(){var n=this,t=function(t){return t==n.props.estado.folio_establecimiento};return this.props.establecimientos.map(function(n){return React.createElement("option",{key:n.folio,selected:t(n.folio),value:n.folio},n.nombre)})}}]),t}(React.Component),Filtro_producto_folio=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={codigo_producto:"",descripcion:"",establecimiento:"",existencia_piezas:"",fecha:""}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("form",{style:{width:"100%",display:"inline-block",height:"70px"," justify-content":"center"},onSubmit:this.buscar_producto.bind(this),className:"panel panel-info"},React.createElement("span",{className:"glyphicon glyphicon-barcode",style:{marginLeft:"10px",marginTop:"10px"}},React.createElement("label",{style:{marginLeft:"5px"}},"PRODUCTO:")),React.createElement("br",null),React.createElement("input",{type:"text",style:{width:"80px",display:"inline-block",marginLeft:"5px"},className:"form-control",onChange:this.on_productos.bind(this),placeholder:"codigo",value:this.state.codigo_producto}),React.createElement("button",{className:"fa fa-search btn btn-default",type:"submit",onClick:this.buscar_producto.bind(this),style:{fontSize:"15px",borderRadius:"20px",marginLeft:"3px",display:"inline-block"}}),React.createElement("input",{className:"form-control",style:{marginLeft:"5px",width:"70%",display:"inline-block"},value:this.state.descripcion,placeholder:"Descripcion..."}))}},{key:"on_seleccionar",value:function(n){this.props.obtener_producto(n);this.setState({codigo_producto:"",descripcion:"",establecimiento:"",existencia_piezas:"",fecha:""})}},{key:"on_productos",value:function(n){n=n.target.value;n!=NaN?this.setState({codigo_producto:n,descripcion:"",establecimiento:"",existencia_piezas:"",fecha:""}):this.setState({codigo_producto:""})}},{key:"buscar_producto",value:function(n){this.state.codigo_producto!=NaN&&this.state.codigo_producto!=""&&this.state.codigo_producto!=null?this.props.establecimiento!=""?(console.log("Codigo A enviar:",this.state.codigo_producto),this.obtener_producto_folio()):alert("Falta Seleccionar Establecimiento!!!"):alert("Falta Codigo!!!");n.preventDefault()}},{key:"obtener_producto_folio",value:function(){var n=this;conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/obtener_productos_folio",{folio:this.state.codigo_producto,establecimiento:this.props.establecimiento},function(t){if(console.log("Productos:",t.d),t.d.length>0){var i=t.d[0];n.setState(i);n.on_seleccionar(i);document.getElementById("dialog").style.display="none"}else alert("No Encontrado!!!")})}}]),t}(React.Component),Clasificado_Filtro_Productos=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={producto:"",clase:"",categoria:"",familia:"",linea:"",talla:""}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this;return React.createElement("div",{className:"panel-body",style:{height:"400px"}},React.createElement("h4",null,"FILTRO PRODUCTO INVENTARIO PARCIAL"),React.createElement("table",{className:"table ",style:{width:"100%"}},React.createElement("tbody",null,React.createElement(Item_filtro,{titulo:"PRODUCTOS",valor:this.state.producto,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.producto,buscar:function(){return n.buscar("producto",n.state.producto)},tipo_filtro:function(t){return n.tipo_filtro("producto",t)}}),React.createElement(Item_filtro,{titulo:"CLASES",valor:this.state.clase,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.clase,buscar:function(){return n.buscar("clase_producto",n.state.clase)},tipo_filtro:function(t){return n.tipo_filtro("clase_producto",t)}}),React.createElement(Item_filtro,{titulo:"CATEGORIAS",valor:this.state.categoria,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.categoria,buscar:function(){return n.buscar("Categoria",n.state.categoria)},tipo_filtro:function(t){return n.tipo_filtro("Categoria",t)}}),React.createElement(Item_filtro,{titulo:"FAMILIA",valor:this.state.familia,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.familia,buscar:function(){return n.buscar("familia",n.state.familia)},tipo_filtro:function(t){return n.tipo_filtro("familia",t)}}),React.createElement(Item_filtro,{titulo:"LINEA",valor:this.state.linea,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.linea,buscar:function(){return n.buscar("linea_producto",n.state.linea)},tipo_filtro:function(t){return n.tipo_filtro("linea_producto",t)}}),React.createElement(Item_filtro,{titulo:"TALLA",valor:this.state.talla,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.talla,buscar:function(){return n.buscar("talla",n.state.talla)},tipo_filtro:function(t){return n.tipo_filtro("talla",t)}}))))}},{key:"tipo_filtro",value:function(n,t){this.props.tipo_filtro(n,t);this.props.deshacer();var i={producto:"",clase:"",categoria:"",familia:"",linea:"",talla:""},r=t.target.value;switch(n){case"producto":i.producto=r;break;case"clase_producto":i.clase=r;break;case"familia":i.familia=r;break;case"linea_producto":i.linea=r;break;case"talla":i.talla=r;break;case"Categoria":i.categoria=r}this.setState(i)}},{key:"buscar",value:function(n,t){console.log("Buscar...");this.props.buscar(n,t)}},{key:"borrar",value:function(){console.log("Borrar...");this.props.deshacer();this.setState({producto:"",clase:"",categoria:"",familia:"",linea:"",talla:""})}}]),t}(React.Component),Modal_clasificadores_productos=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.contador={cantidad:-1,inicio:0,termino:99};this.state={filtro:"",lista_seleccion:[]}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{id:"mod_productos",className:"modal_generica"},React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel panel-heading",style:{color:"azure",background:"rgb(87, 182, 141)"}},React.createElement("span",{className:"glyphicon glyphicon-remove-circle close",onClick:this.cerrar.bind(this)}),React.createElement("label",null,"FILTRO DE CLASIFICADORES")),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"form-group"},React.createElement("span",{className:"glyphicon glyphicon-filter"}," BUSQUEDA DE CLASIFICADOR"),React.createElement("input",{type:"text",onChange:this.filtrado_tabla.bind(this),className:"form-control",placeholder:"Filtro..."})),React.createElement("div",{id:"contenedor_filtro_productos"},React.createElement("table",{className:"table "},React.createElement("thead",{className:"panel panel-info"},React.createElement("tr",{className:"info"},React.createElement("th",null,"CODIGO"),React.createElement("th",null,"DESCRIPCION"),React.createElement("th",null," "))),React.createElement("tbody",null,this.datos_tabla()))),this.botones_pie_tabla(),React.createElement("span",{className:"btn btn-primary btn-block",style:{marginTop:"15px"},onClick:this.on_guardar_seleccion.bind(this)},React.createElement("i",{className:"glyphicon glyphicon-download-alt"}," "),React.createElement("label",{style:{marginLeft:"5px"}},"CARGAR")))))}},{key:"on_guardar_seleccion",value:function(){var n=this.state.lista_seleccion.toString();console.log(n);this.props.seleccion_clasificador(n);this.setState({lista_seleccion:[]});document.getElementById("mod_productos").style.display="none"}},{key:"cerrar",value:function(){document.getElementById("mod_productos").style.display="none";this.contador={cantidad:-1,inicio:0,termino:99};this.setState({lista_seleccion:[]})}},{key:"on_seleccionar",value:function(n){var t=[];t=this.props.limitador_filtro=="in"?this.seleccion_lista(n):this.seleccion_unica(n);this.setState({lista_seleccion:t})}},{key:"filtrado_tabla",value:function(n){console.log(n.target.value);this.setState({filtro:n.target.value})}},{key:"seleccion_lista",value:function(n){var t=this.state.lista_seleccion.map(function(n){return n}),i;return t.includes("''"+n.folio+"''")?(i=t.indexOf("''"+n.folio+"''"),i>-1&&t.splice(i,1)):(t.push("''"+n.folio+"''"),console.log(t)),t}},{key:"seleccion_unica",value:function(n){var t=this.state.lista_seleccion.map(function(n){return n});return t.includes("''"+n.folio+"''")?[]:["''"+n.folio+"''"]}},{key:"botones_pie_tabla",value:function(){var n=new Array(3);return n[0]=React.createElement("i",{className:"btn btn-link"},this.contador.cantidad>99?"100":this.contador.cantidad),n[1]=React.createElement("i",{className:"btn btn-link"}," DE "),n[2]=React.createElement("i",{className:"btn btn-link"},this.contador.cantidad),React.createElement("div",{className:"panel panel-info",style:{display:"flex",height:"45px","align-items":"center"}},n)}},{key:"datos_tabla",value:function(){var n=this,i=this.state.filtro.toUpperCase(),t=this.props.clasificadores.filter(function(n){return n.folio.toString().search(i)>-1||n.clasificador.toUpperCase().search(i)>-1}),r;return this.contador.cantidad=t.length,r=function(t){return n.state.lista_seleccion.includes(t)?"glyphicon glyphicon-check":"glyphicon glyphicon-unchecked"},t=t.filter(function(t,i){return i>=n.contador.inicio&&i<=n.contador.termino}),t.map(function(t){return React.createElement("tr",{onClick:function(){return n.on_seleccionar(t)}},React.createElement("td",{style:{width:"60px",textAlign:"center"}},t.folio),React.createElement("td",null,t.clasificador),React.createElement("td",{style:{width:"60px",textAlign:"center",fontSize:"25px"}},React.createElement("i",{className:r("''"+t.folio+"''")})))})}}]),t}(React.Component),Item_filtro=function(n){function t(){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var t=this,n=function(n){return n===t.props.valor};return React.createElement("tr",null,React.createElement("td",{style:{width:"120px"}},React.createElement("label",null,this.props.titulo)),React.createElement("td",{style:{width:"120px"}},React.createElement("select",{className:"form-control",onChange:this.props.tipo_filtro},React.createElement("option",{value:"",selected:n("")},"TODOS"),React.createElement("option",{value:"in",selected:n("in")},"LISTA "),React.createElement("option",{value:"=",selected:n(" =")},"IGUAL "),React.createElement("option",{value:">",selected:n(">")},"MAYOR "),React.createElement("option",{value:"<",selected:n("<")},"MENOR "),React.createElement("option",{value:"!=",selected:n("!=")},"DIFERENTE"))),React.createElement("td",null,React.createElement("div",{className:"form-control"},this.props.resultado!="0"?this.props.resultado:"")),React.createElement("td",{style:{width:"40px"}},React.createElement("a",{className:"glyphicon glyphicon-plus btn btn-info",onClick:this.props.buscar})),React.createElement("td",{style:{width:"40px"}},React.createElement("a",{className:"glyphicon glyphicon-trash btn btn-danger",onClick:this.props.borrar})))}}]),t}(React.Component),Modal_Entrada_cantidad=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={texto:""}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"modal_generica",id:"m",style:{display:"none",position:"fixed"}},React.createElement("div",{className:"panel panel-default",style:{position:"fixed",width:"350px",height:"250px"}},React.createElement("div",{className:"panel-heading "},React.createElement("span",{className:"glyphicon glyphicon-remove-circle red close",onClick:this.cerrar.bind(this)}),React.createElement("label",null,"Existencia Fisica.")),React.createElement("div",{className:"panel panel-body "},React.createElement("div",{className:"panel-info form-group"},React.createElement("label",{className:"form-control",id:"vista_texto_total",style:{textAlign:"right",fontSize:"20px"}},this.state.texto||0)),React.createElement("span",{className:"btn btn-success btn-block",onClick:this._salvar.bind(this)}," Salvar"),React.createElement("div",{className:"panel panel-success",style:{" justify-content":"center",display:"flex"}},React.createElement("table",{className:"table",style:{"align-items":"center",marginLeft:"0px",background:"azure"}},React.createElement("tr",{style:{textAlign:"center"}},this.boton_num(1),this.boton_num(2),this.boton_num(3),React.createElement("th",{style:{background:"azure"}},React.createElement("span",{className:"btn glyphicon glyphicon glyphicon-circle-arrow-left",style:{width:"100%",height:"100%",color:"orange",fontSize:"20px"},onClick:this._borrar.bind(this)}," "))),React.createElement("tr",{style:{textAlign:"center"}},this.boton_num(4),this.boton_num(5),this.boton_num(6),this.boton_num(".")),React.createElement("tr",{style:{textAlign:"center"}},this.boton_num(7),this.boton_num(8),this.boton_num(9),this.boton_num(0)))))))}},{key:"_boton",value:function(n){var t=this.state.texto,i=t.split(".");t.length<9?(n>0&&n<10?t+=n:t.length>0&&n==0?t+=n:i.length==1&&(t=t.length>0?t+=n:"0"+n),this.setState({texto:t})):(document.getElementById("vista_texto_total").style.border="solid 3px red",setTimeout(function(){return document.getElementById("vista_texto_total").style.border=""},1e3))}},{key:"_salvar",value:function(){var n=parseFloat(this.state.texto||0);console.log(n);this.props.seleccion(n);this.setState({texto:""})}},{key:"_borrar",value:function(){var n=this.state.texto;n=n.substr(0,n.length-1);this.setState({texto:n})}},{key:"_borrar_todo",value:function(){this.setState({texto:""})}},{key:"cerrar",value:function(){this.setState({texto:""});document.getElementById("m").style.display="none"}},{key:"boton_num",value:function(n){var t=this;return React.createElement("th",{style:{background:"azure"}},React.createElement("label",{className:"btn btn-info",style:{width:"95%",height:"100%",fontSize:"18px",marginLeft:"2px",marginTop:"2px"},onClick:function(){return t._boton(n)}},n))}}]),t}(React.Component),Moda_revicion_inventario_parcial=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.producto={codigo_producto:"",descripcion:"",existencia_piezas:"",real:"",fecha:"",ediciones:0};this.posicion=-1;this.state={lista:[]}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"modal_generica",id:"modal_invemtario_parcial"},React.createElement("div",{className:"panel panel-default",style:{marginTop:"-30px"}},React.createElement("div",{className:"panel panel-heading",style:{color:"azure",background:"rgba(45, 137, 237, 0.97)"}},React.createElement("span",{className:"glyphicon glyphicon-remove-circle close",onClick:this.cerrar.bind(this)}),React.createElement("span",{className:"fa fa-cubes"}," "),React.createElement("label",{style:{marginLeft:"5px"}}," INVENTARIOS PARCIALES")),React.createElement("div",{className:"panel-body",style:{height:"83%"}},React.createElement(Filtro_producto_folio,{establecimiento:this.props.establecimiento,obtener_producto:this.on_obtener_producto.bind(this)}),React.createElement("div",{className:"panel panel-default",style:{height:"455px","overflow-x":"auto","overflow-y":"scroll"}},React.createElement("table",{className:"table table-striped"},React.createElement("thead",{className:"panel panel-info"},React.createElement("tr",{className:"info"},React.createElement("th",{style:{width:"80px",textAlign:"center"}},"CODIGO"),React.createElement("th",{style:{textAlign:"center"}},"DESCRIPCION"),React.createElement("th",{style:{width:"80px",textAlign:"center"},colspan:"3"},"EXIST. FISICA"))),React.createElement("tbody",null,this.datos_tabla())))),React.createElement("i",{className:"btn btn-success btn-block glyphicon glyphicon-save",onClick:this.finalizar_inventario.bind(this)},React.createElement("label",{style:{marginLeft:"10px"}},"FINALIZAR REVISIÓN INVENTARIO")),React.createElement(Modal_Entrada_cantidad,{seleccion:this.agregar_producto_a_lista.bind(this)})))}},{key:"on_obtener_producto",value:function(n){console.log(n);var t=-1,i=this.props.inventario,r=i.filter(function(t){return t.codigo_producto==n.codigo_producto}),u=this.state.lista.filter(function(i,r){return t=r,i.codigo_producto==n.codigo_producto});if(this.producto=n,r.length>0&&t==-1)console.log("Si Esta:",n),document.getElementById("m").style.display="flex";else if(u.length>0){if(confirm("EL PRODUCTO : "+n.descripcion+"\n SE ENCUENTRA EN REVICION\n ¿MODIFICAR?")){console.log("No Existente MODIFICAR :",n);this.on_editar_producto(t)}}else confirm("EL PRODUCTO : "+n.descripcion+"\n NO EXISTE EN LA SELECCION\n ¿AGREGAR?")&&(console.log("No Existente :",n),document.getElementById("m").style.display="flex")}},{key:"on_editar_producto",value:function(n){this.posicion=n;document.getElementById("m").style.display="flex"}},{key:"on_eliminar_producto",value:function(n){var t=this.state.lista;t.splice(n,1);this.setState({lista:t})}},{key:"finalizar_inventario",value:function(){var n=this,t=this.props.inventario.map(function(t){var i=n.state.lista.findIndex(function(n){return n.codigo_producto==t.codigo_producto});return t.real=i>-1?n.state.lista[i].real:t.real,t.establecimiento=n.props.folio_establecimiento,t});this.state.lista.forEach(function(i){var r=n.props.inventario.findIndex(function(n){return n.codigo_producto==i.codigo_producto});r==-1&&(i.establecimiento=n.props.folio_establecimiento,t.push(i))});console.log("Lista:",this.state.lista);console.log("Inventario:",this.props.inventario);console.log("Lista Inventario:",t);this.guardado_inventario(t)}},{key:"cerrar",value:function(){confirm("Al Cerrar Se Perderan Los Cambios!!!\n¿Cerrar?")&&(this.setState({lista:[]}),document.getElementById("modal_invemtario_parcial").style.display="none")}},{key:"agregar_producto_a_lista",value:function(n){var r=this,t=this.state.lista,u=t.filter(function(n){return n.codigo_producto==r.producto.codigo_producto}),i;u.length==0?(this.producto.real=n,t.push(this.producto)):this.posicion>-1&&(i=t[this.posicion],i.real=n,i.ediciones+=1,t[this.posicion]=i,this.posicion=-1);this.setState({lista:t});document.getElementById("m").style.display="none"}},{key:"guardado_inventario",value:function(n){var t=this;conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/guardar_inventario_parcial",{responsable:ID_SCOI,inventario:n},function(n){var i=n.d;console.log(i);i>0&&(document.getElementById("modal_invemtario_parcial").style.display="none",alert("SE GUARDARON "+i+" REGISTROS."),t.setState({lista:[]}))})}},{key:"datos_tabla",value:function(){var n=this;return console.log(this.state.lista),this.state.lista.map(function(t,i){return React.createElement("tr",null,React.createElement("td",{style:{width:"80px",textAlign:"center"}},t.codigo_producto),React.createElement("td",null,t.descripcion),React.createElement("td",{style:{width:"80px",textAlign:"center"}},React.createElement("label",{className:"form-control",style:{textAlign:"right"}},t.real)),React.createElement("td",{style:{width:"30px",textAlign:"center",fontSize:"20px"}},React.createElement("span",{className:"btn btn-primary glyphicon glyphicon-edit",onClick:function(){return n.on_editar_producto(i)}})),React.createElement("th",{style:{width:"30px",textAlign:"center",fontSize:"20px"}},React.createElement("span",{className:"btn btn-danger fa fa-trash-o",onClick:function(){return n.on_eliminar_producto(i)}})))})}}]),t}(React.Component),App=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.lista_establecimientos=[];this.lista_clasificadores=[];this.lista_productos=[];this.resultados_filtro={producto:"0",clase:"0",categoria:"0",familia:"0",linea:"0",talla:"0"};this.state={folio_establecimiento:-1,establecimiento:"",codigo_producto:"",descripcion:"",existencia:-1,captura:0,fecha:"",modificacion:0,condicion:"'0','0','0','0','0','0'",tipo_filtro:"",limitador_filtro:""};this.obtener_establecimientos()}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement(Cabecera,{establecimientos:this.lista_establecimientos,on_establecimiento:this.on_cambio_estableciomiento.bind(this),revisar:this.obtener_productos.bind(this),estado:this.state}),React.createElement(Filtro_producto_folio,{establecimiento:this.state.establecimiento,obtener_producto:this.obtener_producto.bind(this)})),React.createElement(Clasificado_Filtro_Productos,{tipo_filtro:this.filtro.bind(this),resultados_filtro:this.resultados_filtro,deshacer:this.on_deshacer.bind(this),buscar:this.buscar.bind(this)}),React.createElement(Modal_clasificadores_productos,{clasificadores:this.lista_clasificadores,limitador_filtro:this.state.limitador_filtro,seleccion_clasificador:this.seleccion_clasificador.bind(this)}),React.createElement(Moda_revicion_inventario_parcial,{establecimiento:this.state.establecimiento,folio_establecimiento:this.state.folio_establecimiento,inventario:this.lista_productos}))}},{key:"on_cambio_estableciomiento",value:function(n){var t="",i=n.target.value;console.log(i);i>0&&(t=this.lista_establecimientos.filter(function(n){return n.folio==i})[0].nombre,console.log(t));this.setState({folio_establecimiento:i,establecimiento:t,codigo_producto:"",descripcion:"",existencia:-1,captura:0,fecha:"",modificacion:0,condicion:"'"+t+"','0','0','0','0','0','0'",tipo_filtro:"",limitador_filtro:""})}},{key:"on_deshacer",value:function(){this.resultados_filtro={producto:"0",clase:"0",categoria:"0",familia:"0",linea:"0",talla:"0"};this.setState({tipo_filtro:"",limitador_filtro:"",codigo_producto:"",descripcion:""})}},{key:"filtro",value:function(n,t){console.log("Tipo:"+n+"\nlimitador:"+t.target.value);this.setState({tipo_filtro:n,limitador_filtro:t.target.value})}},{key:"seleccion_clasificador",value:function(n){this.resultados_filtro={producto:"0",clase:"0",categoria:"0",familia:"0",linea:"0",talla:"0"};n=this.state.limitador_filtro=="in"?this.state.limitador_filtro+" ("+n+")":this.state.limitador_filtro+" "+n;console.log(this.state.tipo_filtro);switch(this.state.tipo_filtro){case"producto":this.resultados_filtro.producto=n;break;case"clase_producto":this.resultados_filtro.clase=n;break;case"familia":this.resultados_filtro.familia=n;break;case"linea_producto":this.resultados_filtro.linea=n;break;case"talla":this.resultados_filtro.talla=n;break;case"Categoria":this.resultados_filtro.categoria=n}console.info(this.resultados_filtro);var t="'"+this.state.establecimiento+"','"+this.resultados_filtro.producto+"','"+this.resultados_filtro.clase+"','"+this.resultados_filtro.categoria+"','"+this.resultados_filtro.familia+"','"+this.resultados_filtro.linea+"','"+this.resultados_filtro.talla+"'";console.log(t);this.setState({condicion:t})}},{key:"obtener_producto",value:function(n){console.log("Obtenido:",n);this.resultados_filtro={producto:"0",clase:"0",categoria:"0",familia:"0",linea:"0",talla:"0"};this.resultados_filtro.producto="=(''"+n.codigo_producto+"'')";var t="'"+this.state.establecimiento+"','=(''"+n.codigo_producto+"'')','0','0','0','0','0'  ";this.setState({limitador_filtro:"=",tipo_filtro:"producto",condicion:t});document.getElementById("dialog").style.display=""}},{key:"buscar",value:function(n,t){console.log("padre Buscar");var i="";switch(n){case"producto":i="productos";break;case"clase_producto":i="clases_productos";break;case"familia":i="familias";break;case"linea_producto":i="lineas_productos";break;case"talla":i="tallas";break;case"Categoria":i="Categorias"}this.state.establecimiento!=""?t!=""?(console.log("columna="+n+"\ncondicion="+t+"\nTabla="+i),n=="producto"?this.obtener_productos_clasificadores():this.obtener_clasificadores(i,n),this.setState({tipo_filtro:n,limitador_filtro:t})):alert("EL LIMITADOR DEL FILTRO PARA '"+n+'\' ES:\n "TODOS".'):alert("SELECCIONE ESTABLECIMIENTO!!!")}},{key:"obtener_establecimientos",value:function(){var n=this;conexion_api_from_body("servicios/matriz/conexiones.asmx/obtener_establecimientos",{},function(t){console.log("Establecimientos:",t.d);n.lista_establecimientos=t.d;n.setState({folio_establecimiento:-1})})}},{key:"obtener_productos_clasificadores",value:function(){var n=this;console.log("POR PRODUCTO");conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/obtener_productos_clasificador",{est:this.state.establecimiento},function(t){n.lista_clasificadores=t.d;document.getElementById("mod_productos").style.display="flex";n.setState({})})}},{key:"obtener_clasificadores",value:function(n,t){var i=this;conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/obtener_clasificadores",{tabla:n,columna:t,condicion:""},function(n){i.lista_clasificadores=n.d;console.log(">Clasificadores:",i.lista_clasificadores);document.getElementById("mod_productos").style.display="flex";i.setState({})})}},{key:"obtener_productos",value:function(){var n=this;this.state.establecimiento!=""?conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/obtener_productos",{condicion:this.state.condicion},function(t){console.log("Productos:",t.d);n.lista_productos=t.d;n.setState({codigo_producto:""});document.getElementById("modal_invemtario_parcial").style.display="flex"}):alert("SELECCIONE ESTABLECIMIENTO!!!")}}]),t}(React.Component);ReactDOM.render(React.createElement(App,null),document.getElementById("container"));