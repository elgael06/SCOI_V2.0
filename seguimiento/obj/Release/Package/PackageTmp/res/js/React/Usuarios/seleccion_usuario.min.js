"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},Seleccion_usuario=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.lista_usuarios=[];this.filtro="";this.state={id:0,nombre:"",foto:"/Data/usr.jpg",puesto:"",establecimiento:""};this.obtener_usuarios()}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("img",{src:this.state.foto,style:ESTILOS.IMAGEN_USUARIO,className:"img-rounded"}),React.createElement("div",{style:ESTILOS.CONTENEDOR_DATOS},React.createElement("input",{type:"button",style:ESTILOS.BTN_FOLIO,value:this.state.id>0?this.state.id:"Folio",className:"btn btn-default"}),React.createElement("div",{style:ESTILOS.CONTENEDOR_NOMBRE},React.createElement(Caja_datos,{icono:"glyphicon glyphicon-user",titulo:"Nombre",datos:this.state.nombre})),React.createElement("div",{style:ESTILOS.CONTENEDOR_PUESTOS},React.createElement(Caja_datos,{icono:"glyphicon glyphicon-briefcase",titulo:"Puesto",datos:this.state.puesto})),React.createElement("div",{style:ESTILOS.CONTENEDOR_ESTABLECIMIENTO},React.createElement(Caja_datos,{icono:"glyphicon glyphicon-tasks",titulo:"Establecimiento",datos:this.state.establecimiento}))),React.createElement(Btn_seleccion,{guardar:this.guardar.bind(this),deshacer:this.on_borrar.bind(this)}),React.createElement(Caja_datos,{icono:"glyphicon glyphicon-filter",titulo:"Filtro",datos:this.filtro,evento:this.on_filtrar.bind(this)}),React.createElement("div",{className:"tabla_matriz"},React.createElement(Tabla,{cavecera:["Folio","Nombre","Puesto","Establecimiento"],datos:this.datos_usuarios()})),React.createElement("style",null))}},{key:"deshacer",value:function(){this.setState({id:0,nombre:"",foto:"/Data/usr.jpg",puesto:"",establecimiento:""})}},{key:"guardar",value:function(){this.props.seleccionar(this.state);console.log("Seleccionado : "+this.state.nombre);this.on_borrar()}},{key:"on_filtrar",value:function(n){this.filtro=n.target.value;this.deshacer()}},{key:"on_borrar",value:function(){this.filtro="";this.deshacer()}},{key:"onclick_tabla_usuarios",value:function(n){this.obtener_foto(n.id_scoi);this.filtro="";this.setState({id:n.id_scoi,nombre:n.nombre_completo,puesto:n.puesto,establecimiento:n.establecimiento})}},{key:"obtener_usuarios",value:function(){var n=this;conexion_api_from_body("servicios/ususrios_scoiServ.asmx/obtener_usuario",{tipo:"Todos",filtro:"Activo"},function(t){n.lista_usuarios=t.d;n.setState({id:-1})})}},{key:"obtener_foto",value:function(n){var t=this;conexion_api_from_body("servicios/ususrios_scoiServ.asmx/obtener_usuario_imagen",{tipo:"id_scoi",filtro:n},function(n){t.setState({foto:n.d.foto})})}},{key:"datos_usuarios",value:function(){var n=this,t=this.lista_usuarios.filter(function(t){return t.nombre_completo.toUpperCase().search(n.filtro.toUpperCase())>-1||t.puesto.toUpperCase().search(n.filtro.toUpperCase())>-1||t.establecimiento.toUpperCase().search(n.filtro.toUpperCase())>-1||t.id_scoi.toString().search(n.filtro.toUpperCase())>-1});return t.map(function(t){return React.createElement("tr",{key:t.id_scoi,onClick:function(){return n.onclick_tabla_usuarios(t)}},React.createElement("td",{style:{width:"50px","text-align":"center"}},t.id_scoi),React.createElement("td",null,t.nombre_completo),React.createElement("td",{style:{width:"250px"}},t.puesto),React.createElement("td",{style:{width:"150px"}},t.establecimiento))})}}]),t}(React.Component),ESTILOS={IMAGEN_USUARIO:{height:"90px",width:"90px","margin-top":"-105px",border:"solid #808080 1px"},CONTENEDOR_DATOS:{"margin-left":"5px",display:"inline-block",width:"87%"},BTN_FOLIO:{"margin-top":"-40px"},CONTENEDOR_NOMBRE:{display:"inline-block",width:"80%"},CONTENEDOR_PUESTOS:{"margin-left":"5px",display:"inline-block",width:"45%"},CONTENEDOR_ESTABLECIMIENTO:{"margin-left":"5px",display:"inline-block",width:"50%"}};