"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},Servicios=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.lista_establecimientos=conexion_ajax("servicios/matriz/conexiones.asmx/obtener_establecimientos")||[];this.lista_departamentos=conexion_ajax("servicios/servicios_generales/conexiones.asmx/departamentos")||[];this.lista_cuestionarios=conexion_ajax("servicios/servicios_generales/conexiones.asmx/cuestionarios")||[];this.lista_departamentos_aplica_cuestionario=conexion_ajax("servicios/servicios_generales/conexiones.asmx/departamentos")||[];this.lista_datos_cuestionario=[];this.servicios_seleccionados=[{folio_zona:1,orden:1,folio_servicio:0}];this.seleccionado_filtro=[];this.lista_servicios_nombre=[];this.cavecera_tabla_cuestionarios=["Folio","Cuestionario","Zona","Establecimiento","modificacion","Estatus",""];this.cavecera_tabla_datos_cuestionario=["#","ZONA","ACTIVO","CRITERIO","SERVICIO",""];this.titulo_modal="";this.titulo_sel_modal="";this.cavecera_tabla_modal=[];this.cuerpo_tabla_modal=[];this.seleccion_tabla_modal={folio:0,dato:""};this.nuevo=this.on_nuevo.bind(this);this.editar=this.on_editar.bind(this);this.guardar=this.on_guardar.bind(this);this.deshacer=this.on_deshacer.bind(this);this.on_cuestionario=this.on_click_cuestionario.bind(this);this.cambio_estatus=this.on_cambio_estatus.bind(this);this.cambio_departamento=this.on_cambio_departamento.bind(this);this.seleccion_establecimiento=this.on_seleccion_establecimiento.bind(this);this.state={id_cuestionario:0,cuestionario:"",estatus:"V",id_departamento_aplica_cuestionario:-1,edicion:!1,nuevo:!1,departamento:0,establecimiento:0,id_zona:0,id_activo:0,id_criterio:0,id_servicio:0,filtro_tabla_modal:"",modal_activa:"",fila_tabla_seleccionada:null};this.nom_Zona="";this.nom_activo="";this.nom_criterio="";this.nom_servicio="";this.nom_servicio_detalle=""}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement(Botonera,{nuevo:this.nuevo,editar:this.editar,guardar:this.guardar,deshacer:this.deshacer,class_editar:this.state.edicion,class_nuevo:this.state.nuevo}),React.createElement("br",null),React.createElement("label",null,React.createElement("div",{style:{width:"700px",display:"inline-block","margin-left":"20px"}},React.createElement(Caja_datos,{icono:"glyphicon glyphicon-edit",titulo:"Cuestionario",datos:this.state.cuestionario,evento:this.on_cuestionario})),React.createElement("div",{style:{width:"250px",display:"inline-block","margin-left":"20px"}},React.createElement(Caja_datos_select,{icono:"glyphicon glyphicon-question-sign",titulo:"Estatus",seleccion:this.cambio_estatus,opciones:this.opciones_estatus()})),React.createElement("div",{style:{width:"350px",display:"inline-block","margin-left":"20px"}},React.createElement(Caja_datos_select,{icono:"glyphicon glyphicon-question-sign",titulo:"Departamento Aplica",seleccion:this.cambio_departamento_aplica_cuestionario.bind(this),opciones:this.opciones_departamentos_aplica_cuestionario()}))),React.createElement("label",null,this.seleccion_zona_establecimiento()),this.seleccion_tabla(),React.createElement(Modal_con_tabla,{id:"modal_",titulo_modal:this.titulo_modal,icono_seleccion:"glyphicon glyphicon-edit",titulo_seleccion:this.titulo_sel_modal,seleccionado:this.seleccion_tabla_modal.dato,texto_filtro:this.state.filtro_tabla_modal,evento_filtrar:this.on_filtro_tabla_modal.bind(this),cavecera_tabla:this.cavecera_tabla_modal,lista_tabla:this.cuerpo_tabla_modal,guardar:this.seleccionar_de_tabla_modal.bind(this),deshacer:this.des_seleccionar_de_tabla_modal.bind(this)}))}},{key:"seleccion_zona_establecimiento",value:function(){var i=this,n=this.lista_cuestionarios.filter(function(n){return n.folio==i.state.id_cuestionario})[0]!=undefined?this.lista_cuestionarios.filter(function(n){return n.folio==i.state.id_cuestionario})[0]:{folio_establecimiento:1},t;return n.folio_departamento==undefined&&(n.folio_departamento=this.state.departamento,n.folio_establecimiento=this.state.establecimiento),t=[React.createElement(Caja_datos,{icono:"glyphicon glyphicon-edit",titulo:"Zona",datos:this.nom_Zona})],this.lista_datos_cuestionario.length==0&&t.push(React.createElement("i",{className:"glyphicon glyphicon-search","data-toggle":"modal","data-target":"#modal_",onClick:this.on_seleccion_zona.bind(this)})),React.createElement("div",null,React.createElement("div",{className:"cajas_datos_cuestionarios"},t),React.createElement("div",{style:{width:"40%",display:"inline-block","margin-left":"20px"}},React.createElement(Caja_datos_select,{titulo:"Establecimiento",icono:"glyphicon glyphicon-briefcase",seleccion:this.seleccion_establecimiento,opciones:this.opciones_establecimientos()})))}},{key:"on_nuevo",value:function(){console.log("nuevo");var n=this.lista_cuestionarios[this.lista_cuestionarios.length-1].folio+1||1,t=this.lista_departamentos[0].folio,i=this.lista_establecimientos[0].folio;this.nom_Zona="";this.nom_activo="";this.nom_criterio="";this.nom_servicio="";this.nom_servicio_detalle="";this.lista_datos_cuestionario=[];this.setState({id_cuestionario:n,edicion:!0,nuevo:!0,departamento:0,establecimiento:0})}},{key:"on_editar",value:function(){this.state.id_cuestionario&&!this.state.nuevo?(this.lista_datos_cuestionario=conexion_ajax("servicios/servicios_generales/conexiones.asmx/datos_cuestionarios",{folio:this.state.id_cuestionario}),this.servicios_seleccionados=conexion_ajax("servicios/servicios_generales/conexiones.asmx/servicios_por_activos_ckl",{folio:this.state.id_cuestionario}),this.setState({edicion:!0,nuevo:!1,estatus:"V"})):alert("seleccione Un campo!!!")}},{key:"on_guardar",value:function(){var n=this;console.log("guardar");this.lista_datos_cuestionario.length>0&&this.state.cuestionario.length>0?function(){var u=n.state.id_cuestionario+",'"+n.state.cuestionario+"',"+n.state.id_departamento_aplica_cuestionario+","+n.state.id_zona+","+n.state.establecimiento+",'"+n.state.estatus+"',"+ID_SCOI,f=n.lista_datos_cuestionario.map(function(n){return n.folio+","+n.orden+","+n.folio_zona+","+n.folio_activo+","+n.folio_criterio+",0"}),t=[],i,r;console.log(n.servicios_seleccionados);n.servicios_seleccionados.sort(function(n,t){return n.orden>=t.orden?1:-1});console.log(n.servicios_seleccionados);n.servicios_seleccionados.forEach(function(n,i){i>0?t.push(n.folio_zona+","+n.orden+","+n.folio_servicio):t.push(n.folio_zona+",0,"+n.folio_servicio)});i=n.lista_datos_cuestionario[n.lista_datos_cuestionario.length-1].orden;console.log({cuestionario:u+","+i,activo:f,serivicios_por_activo:t});r=conexion_ajax("servicios/servicios_generales/conexiones.asmx/servicio_guardar",{cuestionario:u+","+i,activo:f,serivicios_por_activo:t});r>0&&(alert("Guardado...\n Folio: "+r),n.lista_cuestionarios=conexion_ajax("servicios/servicios_generales/conexiones.asmx/cuestionarios")||[],n.lista_datos_cuestionario=[],n.servicios_seleccionados=[],n.on_deshacer())}():alert("Sin Datos En Tabla Para Guardar!!!")}},{key:"on_deshacer",value:function(){console.log("deshacer");this.servicios_seleccionados=[];this.nom_Zona="";this.nom_activo="";this.nom_criterio="";this.nom_servicio="";this.nom_servicio_detalle="";this.lista_datos_cuestionario=[];this.setState({id_cuestionario:0,cuestionario:"",estatus:"V",id_departamento_aplica_cuestionario:-1,edicion:!1,nuevo:!1,departamento:0,establecimiento:0,id_zona:0,id_activo:0,id_criterio:0,id_servicio:0,filtro_tabla_modal:"",modal_activa:"",fila_tabla_seleccionada:null})}},{key:"on_tabla_datos_cuestionarios",value:function(n){console.log(n);this.nom_Zona=n.zona;this.setState({id_cuestionario:n.folio,cuestionario:n.cuestionario,estatus:n.estatus,id_zona:n.folio_zona,establecimiento:n.folio_establecimiento,id_departamento_aplica_cuestionario:n.departamento_aplica})}},{key:"on_click_cuestionario",value:function(n){this.state.edicion&&this.setState({cuestionario:n.target.value})}},{key:"on_seleccion_establecimiento",value:function(n){var t=this.lista_datos_cuestionario.length===0?n.target.value:this.state.establecimiento;this.setState({establecimiento:t})}},{key:"on_cambio_estatus",value:function(n){this.setState({estatus:n.target.value})}},{key:"on_seleccion_zona",value:function(){this.lista_Zonas=conexion_ajax("servicios/servicios_generales/conexiones.asmx/servicio_zona")||[];console.log("zona");this.titulo_modal="Seleccion Zona : ";this.titulo_sel_modal="Zona";this.cavecera_tabla_modal=["Folio","Zona","Estatus"];this.zona("");this.setState({filtro_tabla_modal:"",modal_activa:"zona"})}},{key:"on_cambio_departamento",value:function(n){this.setState({departamento:n.target.value})}},{key:"cambio_departamento_aplica_cuestionario",value:function(n){this.setState({id_departamento_aplica_cuestionario:n.target.value})}},{key:"on_seleccion_activo",value:function(){this.lista_activo=conexion_ajax("servicios/servicios_generales/conexiones.asmx/servicios_activos_ckl",{establecimiento:this.state.establecimiento,departamento:this.state.departamento})||[];console.info(this.lista_activo);console.log("activo");this.titulo_modal="Seleccion Activo : ";this.titulo_sel_modal="Activo";this.cavecera_tabla_modal=["folio","Descripcion","Fecha","Estado"];this.actividad("");this.setState({filtro_tabla_modal:"",modal_activa:"actividad"})}},{key:"on_seleccion_criterios",value:function(){this.lista_criterios=conexion_ajax("servicios/servicios_generales/conexiones.asmx/servicio_criterio")||[];console.log("criterios");this.titulo_modal="Seleccion Criterio : ";this.titulo_sel_modal="Criterio ";this.cavecera_tabla_modal=["Folio","Criterio","Estatus"];this.criterio("");this.setState({filtro_tabla_modal:"",modal_activa:"criterio"})}},{key:"cuestionarios_eliminar",value:function(n){confirm("Eliminar Cuestionario?\n Al Eliminarlo Se Borrara Tambien Los Criterios Y Respuestas Que Contenga!!")?(conexion_ajax("servicios/servicios_generales/conexiones.asmx/servicios_cuestionarios_eliminar",{folio:n}),this.lista_cuestionarios=conexion_ajax("servicios/servicios_generales/conexiones.asmx/cuestionarios")||[],this.on_deshacer()):console.log("Cancelado Elimnar Folio: "+n)}},{key:"on_filtro_tabla_modal",value:function(n){var t=n.target.value;this.state.modal_activa=="zona"?this.zona(t):this.state.modal_activa=="criterio"?this.criterio(t):this.state.modal_activa=="servicio"?this.servicio(t):this.state.modal_activa=="actividad"&&this.actividad(t);this.setState({filtro_tabla_modal:t})}},{key:"seleccion_folio_modal",value:function(n){this.seleccion_tabla_modal.folio=n;this.state.modal_activa=="zona"?this.seleccion_tabla_modal.dato=this.lista_Zonas.filter(function(t){return t.folio==n})[0].nombre||"":this.state.modal_activa=="criterio"?this.seleccion_tabla_modal.dato=this.lista_criterios.filter(function(t){return t.folio==n})[0].nombre||"q":this.state.modal_activa=="servicio"?this.seleccion_tabla_modal.dato=this.lista_servicios.filter(function(t){return t.folio==n})[0].nombre||"q":this.state.modal_activa=="actividad"&&(this.seleccion_tabla_modal.dato=this.lista_activo.filter(function(t){return t.folio==n})[0].descripcion||"");this.setState({filtro_tabla_modal:""})}},{key:"seleccionar_de_tabla_modal",value:function(){console.log("Seleccion Modal");var n={filtro_tabla_modal:"",modal_activa:"",fila_tabla_seleccionada:null};this.state.modal_activa=="zona"?(this.nom_Zona=this.seleccion_tabla_modal.dato,n.id_zona=this.seleccion_tabla_modal.folio):this.state.modal_activa=="criterio"?(this.nom_criterio=this.seleccion_tabla_modal.dato,n.id_criterio=this.seleccion_tabla_modal.folio):this.state.modal_activa=="servicio"?(this.colocar_servicios_en_lista(),this.seleccionado_filtro=[]):this.state.modal_activa=="actividad"&&(this.nom_activo=this.seleccion_tabla_modal.dato,n.id_activo=this.seleccion_tabla_modal.folio);this.setState(n);this.seleccion_tabla_modal={folio:0,dato:""}}},{key:"des_seleccionar_de_tabla_modal",value:function(){console.log("Deshacer Seleccion Modal");this.seleccionado_filtro=[];this.seleccion_tabla_modal={folio:0,dato:""};this.setState({filtro_tabla_modal:"",modal_activa:"",fila_tabla_seleccionada:null})}},{key:"on_seleccion_servicios",value:function(){this.lista_servicios=conexion_ajax("servicios/servicios_generales/conexiones.asmx/servicios_detalles_ckl")||[];console.log("servicios");this.titulo_modal="Seleccion Servicio : ";this.titulo_sel_modal="Servicio ";this.cavecera_tabla_modal=["Seleccion","Folio","Servicio","Detalle","Prioridad"];this.servicio("");this.setState({filtro_tabla_modal:"",modal_activa:"servicio"})}},{key:"on_agregar_datos_cuestionario_a_tabla",value:function(){var i=this,r=1,n,t;this.lista_datos_cuestionario.length>0&&(r=this.lista_datos_cuestionario[this.lista_datos_cuestionario.length-1].orden+1||1);n={folio:0,orden:r,folio_cuestionario:this.state.id_cuestionario,cuestionario:this.state.cuestionario,folio_zona:this.state.id_zona,zona:this.nom_Zona,folio_activo:this.state.id_activo,activo:this.nom_activo,folio_criterio:this.state.id_criterio,criterio:this.nom_criterio,folio_servicio:this.state.id_servicio,n_servicio:0,detalle:this.nom_servicio_detalle};t=this.lista_datos_cuestionario.filter(function(n){return n.folio_activo==i.state.id_activo&&n.folio_zona==i.state.id_zona});console.log(t);console.log(n);this.state.id_activo>0&&this.state.id_criterio>0&&this.state.id_cuestionario>0&&this.state.id_zona>0?(t.length==0?this.lista_datos_cuestionario.push(n):alert("El Activo Ya Se Encuentra En La Tabla..."),this.nom_activo="",this.nom_criterio="",this.nom_servicio="",this.nom_servicio_detalle="",this.seleccionado_filtro=[],this.setState({id_activo:0,id_criterio:0,fila_tabla_seleccionada:null})):alert("Fata seleccionar un Campo!!!")}},{key:"on_mover_datos_cuestionario_en_tabla",value:function(n){var t=this;this.state.fila_tabla_seleccionada!=null?function(){var r=t.lista_datos_cuestionario.indexOf(t.state.fila_tabla_seleccionada),i=r+n,u;i>=0&&i<t.lista_datos_cuestionario.length&&(t.lista_datos_cuestionario[r]=t.lista_datos_cuestionario[i],t.lista_datos_cuestionario[i]=t.state.fila_tabla_seleccionada,u=t.servicios_seleccionados.filter(function(n){return n.folio_zona===t.lista_datos_cuestionario[r].folio_zona&&n.orden===t.lista_datos_cuestionario[r].orden?n.orden=r+1:n.folio_zona===t.lista_datos_cuestionario[i].folio_zona&&n.orden===t.lista_datos_cuestionario[i].orden&&(n.orden=i+1),n.folio_zona===t.lista_datos_cuestionario[r].folio_zona&&n.orden===t.lista_datos_cuestionario[r].orden||n.folio_zona===t.lista_datos_cuestionario[i].folio_zona&&n.orden===t.lista_datos_cuestionario[i].orden}),t.servicios_seleccionados=t.servicios_seleccionados.filter(function(n){return!(n.folio_zona===t.lista_datos_cuestionario[r].folio_zona&&n.orden===t.lista_datos_cuestionario[r].orden||n.folio_zona===t.lista_datos_cuestionario[i].folio_zona&&n.orden===t.lista_datos_cuestionario[i].orden)}),t.servicios_seleccionados=u.concat(t.servicios_seleccionados),t.lista_datos_cuestionario=t.lista_datos_cuestionario.map(function(n){return n.orden=t.lista_datos_cuestionario.indexOf(n)+1,n}),t.setState({fila_tabla_seleccionada:t.lista_datos_cuestionario[i]}))}():alert("Seleccione Una Fila Para Desplazar!!!")}},{key:"on_seleccion_fila_datos",value:function(n){this.seleccionado_filtro=this.servicios_seleccionados.filter(function(t){return t.folio_zona==n.folio_zona&&t.orden==n.orden});this.setState({fila_tabla_seleccionada:n})}},{key:"seleccion_tabla",value:function(){return this.state.edicion?[this.selector_datos(),React.createElement("div",{className:"tabla_matriz"},this.tabla_datos_cuestionario())]:React.createElement("div",{className:"tabla_matriz"},this.tabla_cuestionarios())}},{key:"opciones_estatus",value:function(){return this.state.estatus=="V"?[React.createElement("option",{selected:"",value:"V"},"Vigente"),React.createElement("option",{value:"C"},"Cancelado")]:this.state.estatus=="C"?[React.createElement("option",{value:"V"},"Vigente"),React.createElement("option",{selected:"",value:"C"},"Cancelado")]:void 0}},{key:"opciones_departamento",value:function(){return this.lista_departamentos_aplica_cuestionario.map(function(n){return React.createElement("option",{value:n.folio}," ",n.nombre," ")})}},{key:"opciones_departamentos_aplica_cuestionario",value:function(){var t=this,n=function(n){return n==t.state.id_departamento_aplica_cuestionario},i=this.lista_departamentos_aplica_cuestionario.map(function(t){return React.createElement("option",{selected:n(t.folio),key:t.folio,value:t.folio}," ",t.nombre)});return[React.createElement("option",{selected:n(0),key:"0",value:"0"}," ----"),i]}},{key:"opciones_establecimientos",value:function(){var n=this,t=function(t){return t==n.state.establecimiento};return this.lista_establecimientos.map(function(n){return React.createElement("option",{selected:t(n.folio),value:n.folio}," ",n.nombre)})}},{key:"tabla_cuestionarios",value:function(){return React.createElement(Tabla,{cavecera:this.cavecera_tabla_cuestionarios,datos:this.datos_cuestionarios()})}},{key:"datos_cuestionarios",value:function(){var n=this;return this.lista_cuestionarios.map(function(t){return React.createElement("tr",{onClick:function(){return n.on_tabla_datos_cuestionarios(t)}},React.createElement("td",null,t.folio),React.createElement("td",null,t.cuestionario),React.createElement("td",null,t.zona),React.createElement("td",null,t.establecimiento),React.createElement("td",null,t.modificacion),React.createElement("td",null,t.estatus=="V"?"VIGENTE":"CANCELADO"),React.createElement("td",null,React.createElement("input",{type:"button",className:"btn btn-danger",value:"Eliminar",onClick:function(){return n.cuestionarios_eliminar(t.folio)}})))})}},{key:"selector_datos",value:function(){var n=this;return React.createElement("div",null,React.createElement("div",{style:{width:"40%",display:"inline-block","margin-left":"20px"}},React.createElement(Caja_datos_select,{icono:"glyphicon glyphicon-tasks",titulo:"Departamento",seleccion:this.cambio_departamento,opciones:this.opciones_departamento()})),React.createElement("div",{className:"cajas_datos_cuestionarios"},React.createElement(Caja_datos,{icono:"glyphicon glyphicon-edit",titulo:"Activo",datos:this.nom_activo}),React.createElement("i",{className:"glyphicon glyphicon-search","data-toggle":"modal","data-target":"#modal_",onClick:this.on_seleccion_activo.bind(this)})),React.createElement("div",{className:"cajas_datos_cuestionarios",style:{width:"90%"}},React.createElement(Caja_datos,{icono:"glyphicon glyphicon-edit",titulo:"Criterio",datos:this.nom_criterio}),React.createElement("i",{className:"glyphicon glyphicon-search","data-toggle":"modal","data-target":"#modal_",onClick:this.on_seleccion_criterios.bind(this)})),React.createElement("input",{type:"button",value:"Agregar Datos A Cuestionario",className:"btn btn-success ",onClick:this.on_agregar_datos_cuestionario_a_tabla.bind(this)}),React.createElement("input",{type:"button",value:"Subir",className:"btn btn-default ",onClick:function(){return n.on_mover_datos_cuestionario_en_tabla(-1)}}),React.createElement("input",{type:"button",value:"Bajar",className:"btn btn-default ",onClick:function(){return n.on_mover_datos_cuestionario_en_tabla(1)}}),React.createElement("i",{className:"fa fa-cogs","data-toggle":"modal","data-target":"#modal_",onClick:function(){return n.on_seleccion_servicios()}}," Servicios."))}},{key:"servicios_datos_cuestionario",value:function(){var n=this;return this.lista_datos_cuestionario.map(function(t){return React.createElement("tr",{key:t.orden,className:n.state.fila_tabla_seleccionada==t?"tabla_seleccionada":"",onClick:function(){return n.on_seleccion_fila_datos(t)}},React.createElement("td",null,t.orden),React.createElement("td",null,t.zona),React.createElement("td",null,t.activo),React.createElement("td",null,t.criterio),React.createElement("td",{style:{"text-align":"center"},onClick:function(){return n.ver_servicios_lista_dropdown(t)}},React.createElement(Botones_dropdown,{titulo:t.n_servicio,opciones_menu:n.lista_servicios_nombre})),React.createElement("td",null,React.createElement("input",{type:"button",className:"btn btn-danger",value:"Eliminar",onClick:function(){return n.eliminar_de_tabla_datos_cuestionario(t)}})))})}},{key:"ver_servicios_lista_dropdown",value:function(n){console.log(n);this.datos_vista_servicios()}},{key:"datos_vista_servicios",value:function(){var n=this;this.lista_servicios_nombre=[].map(function(t){return console.log(t.folio+":"+n.activo.folio),t.folio==n.activo.folio?React.createElement("div",{style:{height:"40px"},key:t.folio},t.observacion):void 0})||["Sin Datos..."]}},{key:"eliminar_de_tabla_datos_cuestionario",value:function(n){var t=this,i=this.lista_datos_cuestionario.indexOf(n);this.lista_datos_cuestionario.splice(i,1);this.servicios_seleccionados=this.servicios_seleccionados.filter(function(t){return!(t.folio_zona===n.folio_zona&&t.orden===n.orden)});this.lista_datos_cuestionario.length;this.lista_datos_cuestionario=this.lista_datos_cuestionario.map(function(n){return t.servicios_seleccionados=t.servicios_seleccionados.map(function(i){return i.orden==n.orden&&i.folio_zona==n.folio_zona&&(i.orden=t.lista_datos_cuestionario.indexOf(n)+1),i}),n.orden=t.lista_datos_cuestionario.indexOf(n)+1,n});console.log(this.servicios_seleccionados);this.seleccionado_filtro=[];this.setState({filtro_tabla_modal:"",fila_tabla_seleccionada:null})}},{key:"tabla_datos_cuestionario",value:function(){return React.createElement(Tabla,{cavecera:this.cavecera_tabla_datos_cuestionario,datos:this.servicios_datos_cuestionario()})}},{key:"zona",value:function(n){var t=this,i=this.lista_Zonas.filter(function(t){return t.nombre.toUpperCase().search(n.toUpperCase())>=0});this.cuerpo_tabla_modal=i.map(function(n){return React.createElement("tr",{onClick:function(){return t.seleccion_folio_modal(n.folio)}},React.createElement("td",null,n.folio),React.createElement("td",null,n.nombre),React.createElement("td",null,n.estatus=="V"?"Vigente":"Cancelado"))})}},{key:"actividad",value:function(n){var t=this,i=this.lista_activo.filter(function(t){return t.descripcion.toUpperCase().search(n.toUpperCase())>=0});this.cuerpo_tabla_modal=i.map(function(n){return React.createElement("tr",{onClick:function(){return t.seleccion_folio_modal(n.folio)}},React.createElement("td",null,n.folio),React.createElement("td",null,n.descripcion),React.createElement("td",null,n.fecha),React.createElement("td",null,n.caracteristicas))})}},{key:"criterio",value:function(n){var t=this,i=this.lista_criterios.filter(function(t){return t.nombre.toUpperCase().search(n.toUpperCase())>=0});this.cuerpo_tabla_modal=i.map(function(n){return React.createElement("tr",{onClick:function(){return t.seleccion_folio_modal(n.folio)}},React.createElement("td",null,n.folio),React.createElement("td",null,n.nombre),React.createElement("td",null,n.estatus=="V"?"Vigente":"Cancelado"))})}},{key:"servicio",value:function(n){var t=this,i=this.lista_servicios.filter(function(t){return t.nombre.toUpperCase().search(n.toUpperCase())>=0});this.cuerpo_tabla_modal=i.map(function(n){var i=n.folio;return React.createElement("tr",{onClick:function(){return t.seleccion_folio_modal(n.folio)}},React.createElement("td",null,React.createElement("input",{type:"checkbox",onClick:function(){return t.checar_servicio_seleccionado(n.folio)},checked:t.seleccionado_filtro.filter(function(n){return n.folio_servicio==i}).length>0})),React.createElement("td",null,n.folio),React.createElement("td",null,n.nombre),React.createElement("td",null,n.detalle),React.createElement("td",null,n.prioridad))})}},{key:"checar_servicio_seleccionado",value:function(n){var t=this.state.fila_tabla_seleccionada,i;console.log(t);i=this.seleccionado_filtro.find(function(t){return t.folio_servicio==n});console.log(i);t!=null?(i==undefined?this.seleccionado_filtro.push({folio_servicio:n,orden:t.orden,folio_zona:t.folio_zona}):this.seleccionado_filtro=this.seleccionado_filtro.filter(function(n){return n!=i}),console.log(this.seleccionado_filtro),this.servicio(this.state.filtro_tabla_modal),this.setState({fila_tabla_seleccionada:t})):alert("No Seleciono Activo Para Servicio!!!")}},{key:"colocar_servicios_en_lista",value:function(){var t=this,n;console.log("colocar Servicios:");n=this.state.fila_tabla_seleccionada;this.servicios_seleccionados=this.servicios_seleccionados.filter(function(t){return!(t.folio_zona==n.folio_zona&&t.orden==n.orden)});this.seleccionado_filtro.forEach(function(n){t.servicios_seleccionados.push(n)});this.lista_datos_cuestionario=this.lista_datos_cuestionario.map(function(i){return i.folio_zona==n.folio_zona&&i.orden==n.orden&&(i.n_servicio=t.seleccionado_filtro.length),i})}}]),t}(React.Component);ReactDOM.render(React.createElement(Servicios,null),document.getElementById("contenedor"));