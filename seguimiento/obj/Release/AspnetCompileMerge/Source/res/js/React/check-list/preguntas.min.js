"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},Vista_Preguntas=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.lista_zonas=conexion_ajax("servicios/preguntasServ.asmx/obtener_preguntas")||[];this.lista_pertenece=conexion_ajax("servicios/preguntasServ.asmx/obtener_areas")||[];this.state={folio_pregunta:"",pregunta:"",estatus:!0,pertenece:"",edicion:!1,nuevo:!1,posicion:-1}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n="folio : "+this.state.folio_pregunta;return React.createElement("div",null,React.createElement(Botonera,{nuevo:this.nueva.bind(this),editar:this.editar.bind(this),guardar:this.guardar.bind(this),deshacer:this.deshacer.bind(this),class_editar:this.state.edicion,class_nuevo:this.state.nuevo}),React.createElement("br",null),React.createElement("input",{type:"button",value:n,onClick:function(n){return alert(n.target.value)},className:"btn btn-default caja_folio"}),React.createElement("label",{className:"caja_nombre"},React.createElement(Caja_datos,{icono:"glyphicon glyphicon-edit",titulo:"Pregunta",datos:this.state.pregunta,evento:this.on_cambio_nombre_zona.bind(this)})),React.createElement("label",{className:""},React.createElement(Caja_datos_select,{icono:"glyphicon glyphicon-question-sign",titulo:"Estatus",seleccion:this.on_cambio_estatus.bind(this),opciones:this.opciones_estatus()})),React.createElement("label",{className:""},React.createElement(Caja_datos_select,{icono:"glyphicon glyphicon-question-sign",titulo:"Pertenece",seleccion:this.on_cambio_pertenece.bind(this),opciones:this.opciones_pertenece()})),React.createElement(Tabla_preguntas,{lista_zonas:this.lista_zonas,posicion:this.state.posicion,on_seleccion_de_tabla:this.on_seleccion_de_tabla.bind(this)}))}},{key:"nueva",value:function(){this.state.edicion?alert("Edicion Activada!!!"):(console.log("Nuevo"),this.setState({folio_pregunta:0,pregunta:"",estatus:!0,edicion:!0,nuevo:!0,pertenece:"",posicion:-1}))}},{key:"editar",value:function(){this.nuevo?alert("Nueva Zona En Proceso..."):this.state.folio_pregunta!=""?(console.log("Editar..."),this.setState({edicion:!0,nuevo:!1})):alert("Sin Datos A editar!!!")}},{key:"guardar",value:function(){var n=this,t,i;this.state.edicion&&(t="/servicios/preguntasServ.asmx/guardar_datos",i={folio_pregunta:this.state.folio_pregunta,pregunta:this.state.pregunta,estatus:this.state.estatus?1:0,pertenece:this.state.pertenece},fetch(t,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then(function(t){t.json().then(function(t){n.lista_zonas=conexion_ajax("servicios/preguntasServ.asmx/obtener_preguntas")||[];n.deshacer();alert("Guardado...\nFolio : "+t.d)})})["catch"](function(n){return alert("Error:",n)}))}},{key:"deshacer",value:function(){console.log("Deshacer...");this.setState({folio_pregunta:"",pregunta:"",estatus:!0,edicion:!1,nuevo:!1,pertenece:"",posicion:-1})}},{key:"on_cambio_nombre_zona",value:function(n){this.state.edicion?this.setState({pregunta:n.target.value}):alert("edicion Inactiva")}},{key:"on_cambio_estatus",value:function(n){var t=n.target.value=="V";this.setState({estatus:t})}},{key:"on_cambio_pertenece",value:function(n){this.setState({pertenece:n.target.value})}},{key:"on_seleccion_de_tabla",value:function(n,t){this.state.edicion||this.state.nuevo?alert("Edicion En Proceso..."):this.setState({folio_pregunta:n.folio_pregunta,pregunta:n.pregunta,estatus:n.estatus,pertenece:n.pertenece,posicion:t})}},{key:"borrar_zona",value:function(n){var t=this,i;console.log("folio A Borrar :"+n.folio_pregunta);confirm("Desea Borrar la Zona : "+n.pregunta)&&(i="servicios/servicios_generales/conexiones.asmx/servicios_borrar_criterio",fetch(i,{method:"POST",body:JSON.stringify({folio:n.folio_pregunta}),headers:{"Content-Type":"application/json"}}).then(function(n){n.json().then(function(n){t.lista_zonas=conexion_ajax("servicios/servicios_generales/conexiones.asmx/servicio_criterio")||[];t.deshacer();alert("Borrado...\nFolio : "+n.d)})})["catch"](function(n){return alert("Error:",n)}))}},{key:"opciones_estatus",value:function(){var n=this.state.estatus;return[React.createElement("option",{selected:n,value:"V"},"Vigente"),React.createElement("option",{selected:!n,value:"C"},"Cancelado")]}},{key:"opciones_pertenece",value:function(){var n=this,i=this.state.pertenece,t=this.lista_pertenece.map(function(t){return React.createElement("option",{value:t,selected:n.state.pertenece==t},t)});return[React.createElement("option",{value:"-1"},"Seleccione.."),t]}}]),t}(React.Component),Tabla_preguntas=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={filtro:""}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("input",{type:"text",className:"form-control",placeholder:"filtro",onChange:this.on_filtro.bind(this),value:this.state.filtro}),React.createElement("div",{className:"cuerpo_tabla"},React.createElement(Tabla,{cavecera:[React.createElement("h5",null,"Folio"),React.createElement("h5",null,"Criterios"),React.createElement("h5",null,"Estatus"),React.createElement("h5",null,"Pertenece")],datos:this.datos_zonas()})))}},{key:"on_filtro",value:function(n){this.setState({filtro:n.target.value})}},{key:"datos_zonas",value:function(){var n=this,t=this.state.filtro.toUpperCase(),i=this.props.lista_zonas.filter(function(n){return n.folio_pregunta.toString().search(t)>-1||n.pregunta.toUpperCase().search(t)>-1});return i.map(function(t,i){var r=n.props.posicion==i?"seleccio":"";return React.createElement("tr",{className:r,style:{"border-bottom":"solid 1px  #000000"},onClick:function(){return n.props.on_seleccion_de_tabla(t,i)}},React.createElement("td",{style:{width:"50px"}},t.folio_pregunta),React.createElement("td",null,t.pregunta),React.createElement("td",{style:{width:"90px"}},t.estatus?"Vigente":"Cancelado"),React.createElement("td",{style:{width:"10px"}},t.pertenece))})}}]),t}(React.Component);ReactDOM.render(React.createElement(Vista_Preguntas,null),document.getElementById("container"));