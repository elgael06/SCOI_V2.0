"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},$MI_URL=window.location.protocol+"//"+window.location.hostname,$URL_API=$MI_URL+":90/api/",CompraInterna=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={estado:"T",filtro:"",registros:0,gastos:[],Detalle:null};this.on_estado=this.On_estado.bind(this);this.on_filtro=this.On_filtro.bind(this);this.Obtener=this.Obtener_Gastos_por_Estatus.bind(this);this.BuscarPorFolio=this.Buscar_gasto_por_folio.bind(this);this.Autorizacion=this.Autorizacion_gasto.bind(this);setTimeout(function(){document.getElementById("carga").style.display="none"},1e3)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"panel panel-default"},React.createElement(CaveceraMain,{evEstado:this.on_estado,registros:this.state.registros,evActualizar:this.Obtener}),React.createElement(ContenedorTabla,{gastos:this.state.gastos,filtro:this.state.filtro,evFiltro:this.on_filtro,evSeleccion:this.BuscarPorFolio}),React.createElement(ModalAlimentacion,{seleccion:this.state.Detalle,evAutorizacion:this.Autorizacion}),React.createElement(Cargar,{nombre:"carga"}))}},{key:"On_estado",value:function(n){this.setState({estado:n.target.value,registros:0,gastos:[]})}},{key:"On_filtro",value:function(n){this.setState({filtro:n.target.value})}},{key:"Actualizar",value:function(n){var t=n.length,i=n;this.setState({registros:t,gastos:i})}},{key:"Seleccionar_gasto",value:function(n){this.setState({Detalle:n});typeof n=="object"&&(document.getElementById("modal_detalle_gasto").style.display="flex")}},{key:"Autorizar",value:function(n){document.getElementById("carga").style.display="none";document.getElementById("modal_detalle_gasto").style.display="none";alert(n);this.Obtener_Gastos_por_Estatus();console.log(n)}},{key:"Obtener_Gastos_por_Estatus",value:function(){var n=this,t=this.state.estado;document.getElementById("carga").style.display="flex";fetch($URL_API+"/Obtener_OCI/?estatus="+t,{method:"get",credentials:"same-origin",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then(function(t){return t.json().then(function(t){console.log(t);n.Actualizar(t);document.getElementById("carga").style.display="none"})["catch"](function(){return console.log("Error En Formato JSON!")})})["catch"](function(n){return console.error(n)})}},{key:"Buscar_gasto_por_folio",value:function(n){var t=this;document.getElementById("carga").style.display="flex";fetch($URL_API+"/Detalle_OCI/?folio="+n,{method:"get",credentials:"same-origin",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then(function(n){return n.json().then(function(n){console.log(n);t.Seleccionar_gasto(n);document.getElementById("carga").style.display="none"})["catch"](function(){return console.log("Error En Formato JSON!")})})["catch"](function(n){return console.error(n)})}},{key:"Autorizacion_gasto",value:function(n){var i=this,t={Folio:this.state.Detalle.Folio,Estatus:n==1?"A":"C",Usiario:parseInt(ID_SCOI),Pc:"SISTEMA_WEB",Ip:IP_CLIENTE};console.log("autirizacion=>",t);document.getElementById("carga").style.display="flex";fetch($URL_API+"Autorizacion_OCI/",{method:"post",credentials:"same-origin",body:JSON.stringify(t),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then(function(n){return n.json().then(function(n){i.Autorizar(n)})["catch"](function(){alert("Error En Formato De ResPuesta...")})})["catch"](function(n){alert("Error En Conexion!!!");console.error(n)})}}]),t}(React.Component),CaveceraMain=function(n){var t=n.evEstado,i=n.registros,r=n.evActualizar;return React.createElement("div",{className:"panel-heading"},React.createElement("h3",null,"Autorizacion De Orden De Compra Interna."),React.createElement("div",null,React.createElement("div",{className:"form-group contenedores_cavecera"},React.createElement("strong",null,"Registros."),React.createElement("label",{className:"form-control",id:"numero_de_registros"},i)),React.createElement("div",{className:"form-group contenedores_cavecera"},React.createElement("strong",null,"Estatus."),React.createElement("select",{className:"form-control",id:"estatus",onChange:t},React.createElement("option",{value:"T"},"Todos."),React.createElement("optgroup",{id:"grupo_de_estatus",label:"Estatus"},React.createElement("option",{value:"E"},"En Validacion."),React.createElement("option",{value:"A"},"Autorizado."),React.createElement("option",{value:"S"},"Surtido."),React.createElement("option",{value:"C"},"Cancelado")))),React.createElement("i",{"class":"btn btn-info glyphicon glyphicon-refresh",style:{marginLeft:"20px"},onClick:r,id:"btn_refrescar"})))},ContenedorTabla=function(n){var t=n.gastos,i=n.filtro,r=n.evFiltro,u=n.evSeleccion,f=function(n,t){var i=!1;for(var r in n)i=n[r].toString().search(t)>-1?!0:i;return i},e=function(){var n=i.toUpperCase(),r=t.filter(function(t){return f(t,n)});return r.map(function(n){return React.createElement("tr",{style:{color:"black"}},React.createElement("th",{style:{textAlign:"right"}},n.Folio),React.createElement("td",null,n.Uso_mercancia),React.createElement("td",null,n.Tipo_solicitante),React.createElement("td",null,n.Nombre_solicitante),React.createElement("td",null,n.Fecha),React.createElement("td",null,n.Establecimiento),React.createElement("td",null,n.Estatus),React.createElement("td",null,n.Fecha_autorizacion),React.createElement("td",null,n.Usuario_autorizo),React.createElement("td",{style:{width:"30px",position:"sticky",right:"1px",zIndex:"980",background:"rgba(194, 214, 214,16)"}},React.createElement("i",{className:"btn btn-success",onClick:function(){return u(n.Folio)},style:{fontSize:"28px",borderRadius:"40px"}},React.createElement("i",{className:"fa fa-edit"}))))})};return React.createElement("div",{className:"panel-body"},React.createElement("div",null,React.createElement("strong",null,"Filtro"),React.createElement("input",{type:"text",className:"form-control",onChange:r})),React.createElement("div",{id:"contedor_tabla_datos"},React.createElement("table",{className:"table",id:"tabla_gastos"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{style:{width:"50px"}},"Folio"),React.createElement("th",{style:{width:"250px"}},"Uso De La Mercancia."),React.createElement("th",{style:{width:"90px"}},"Tipo De Solicitante."),React.createElement("th",{style:{width:"310px"}},"Nombre De Solicitante."),React.createElement("th",{style:{width:"150px"}},"Fecha."),React.createElement("th",{style:{width:"180px"}},"Establecimiento."),React.createElement("th",{style:{width:"120px"}},"Estatus."),React.createElement("th",{style:{width:"120px"}},"Fecha Autorizacion."),React.createElement("th",{style:{width:"380px"}},"Usuario Autorizo."),React.createElement("th",{style:{width:"30px",right:"1px"}},"Accion"))),React.createElement("tbody",{id:"datos_gastos"},React.createElement(e,null)))))},ModalAlimentacion=function(n){var t=n.seleccion,i=n.evAutorizacion,r=function(){return t!=null?React.createElement("div",{className:"panel-heading"},React.createElement("i",{className:"btn btn-success",id:"btn_aceptar_estatus",onClick:function(){return i(1)}}," ",React.createElement("i",{className:"glyphicon glyphicon-ok"}," "),"Autorizar"),React.createElement("i",{className:"btn btn-danger",id:"btn_cancelar_estatus",onClick:function(){return i(0)}}," ",React.createElement("i",{className:"glyphicon glyphicon-remove"}," "),"cancelar"),React.createElement("div",{className:"panel-heading",style:{marginTop:"15px"}},React.createElement("div",{style:{width:"80px",display:"inline-block"}},React.createElement("strong",null,"Folio"),React.createElement("div",{className:"form-control",style:{textAlign:"right"}},t.Folio||0)),React.createElement("div",{style:{width:"50%",display:"inline-block"}},React.createElement("strong",null,"Descripcion"),React.createElement("input",{className:"form-control",disable:!0,value:t.Uso_mercancia||"NA"})),React.createElement("div",{style:{width:"25%",display:"inline-block"}},React.createElement("strong",null,"Destino"),React.createElement("input",{className:"form-control",disable:!0,value:t.Establecimiento||"NA"})),React.createElement("br",null),React.createElement("div",{style:{width:"80px",display:"inline-block"}},React.createElement("strong",null,"Folio"),React.createElement("input",{className:"form-control",style:{textAlign:"right"},disable:!0,value:t.Folio_solicitante||"NA"})),React.createElement("div",{style:{width:"50%",display:"inline-block"}},React.createElement("strong",null,"Nombre"),React.createElement("input",{className:"form-control",disable:!0,value:t.Nombre_solicitante||"NA"})),React.createElement("div",{style:{width:"25%",display:"inline-block"}},React.createElement("strong",null,"Solicitante"),React.createElement("input",{className:"form-control",disable:!0,value:t.Solicitante||"NA"})))):null},u=function(){var n=function(){return t!=null?t.Productos.map(function(n){return React.createElement("tr",null,React.createElement("td",null,n.Descripcion),React.createElement("td",null,n.Cantidad),React.createElement("td",null,n.Unidad))}):null};return React.createElement("div",{className:"panel-body"},React.createElement("table",{className:"table table-bordered"},React.createElement("thead",null,React.createElement("tr",{className:"info"},React.createElement("th",null,"Descripcion"),React.createElement("th",{style:{width:"100px"}},"Cantidad"),React.createElement("th",{style:{width:"230px"}},"Unidad"))),React.createElement("tbody",{id:"datos_detalle_gasto"},React.createElement(n,null))))};return React.createElement("div",{className:"modal_",id:"modal_detalle_gasto"},React.createElement("div",{"class":"panel panel-default animate"},React.createElement("div",{id:"modal_detalle_gasto_heading","class":"panel-heading"},React.createElement("i",{className:"btn btn-danger fa fa-close",style:{float:"right"},onClick:function(){return document.getElementById("modal_detalle_gasto").style.display="none"}}),React.createElement("strong",null,"Alimentacion De Orden De Compra Interna.")),React.createElement("div",{id:"modal_detalle_gasto_body","class":"panel-default",style:{overflow:"scroll",heigth:"90%"}},React.createElement(r,null),React.createElement(u,null))))},Cargar=function(n){var t=n.nombre;return React.createElement("div",{id:t,style:{display:"flex",position:"fixed",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(242, 242, 242, 0.79)",top:0,bottom:0,left:0,right:0,zIndex:9999,fontSize:"40px"}},React.createElement("label",{id:t+1},React.createElement("i",{className:"fa fa-circle-o-notch rotate"}),React.createElement("strong",{style:{fontSize:"20px"}}," Cargando..."),React.createElement("br",null)))};console.clear();location.protocol!="http:"&&(location.protocol="http:");ReactDOM.render(React.createElement(CompraInterna,null),document.getElementById("root"));