"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},Cabecera=function(n){function t(){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("div",{style:{width:"300px",display:"inline-block",marginTop:"10px"},className:"form-group"},React.createElement("span",{className:"glyphicon glyphicon-tasks"},React.createElement("label",{style:{marginLeft:"5px"}},"ESTABLECIMIENTO:")),React.createElement("select",{className:"form-control",onChange:this.props.on_establecimiento},React.createElement("option",{value:"-1"},"SELECCIONAR..."),this.establecimientos())),React.createElement("a",{className:"btn-success btn",style:{marginLeft:"5px",borderRadius:"5px"},onClick:this.props.revisar},React.createElement("span",{className:"fa fa-pencil-square-o"},"  Iniciar")))}},{key:"establecimientos",value:function(){var n=this,t=function(t){return t==n.props.estado.folio_establecimiento};return this.props.establecimientos.map(function(n){return React.createElement("option",{key:n.folio,selected:t(n.folio),value:n.folio},n.nombre)})}}]),t}(React.Component),Filtro_producto_folio=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={codigo_producto:"",descripcion:"",establecimiento:"",existencia_piezas:"",fecha:""}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("form",{style:{width:"100%",display:"inline-block",height:"70px"," justify-content":"center"},onSubmit:this.buscar_producto.bind(this),className:"panel panel-info"},React.createElement("span",{className:"glyphicon glyphicon-barcode",style:{marginLeft:"10px",marginTop:"10px"}},React.createElement("label",{style:{marginLeft:"5px"}},"PRODUCTO:")),React.createElement("br",null),React.createElement("input",{type:"text",style:{width:"80px",display:"inline-block",marginLeft:"5px"},id:this.props.nombre_comp||" ",className:"form-control",onChange:this.on_productos.bind(this),placeholder:"codigo",value:this.state.codigo_producto}),React.createElement("button",{className:"fa fa-search btn btn-default",type:"submit",style:{marginLeft:"5px",display:"inline-block"},onClick:this.buscar_producto.bind(this),style:{fontSize:"15px",borderRadius:"20px",marginLeft:"3px",display:"inline-block"}}),React.createElement("input",{className:"form-control",style:{marginLeft:"5px",width:"60%",display:"inline-block"},value:this.state.descripcion,placeholder:"Descripcion..."}))}},{key:"on_seleccionar",value:function(n){this.props.obtener_producto(n);this.setState({codigo_producto:"",descripcion:"",establecimiento:"",existencia_piezas:"",fecha:""})}},{key:"on_productos",value:function(n){n=n.target.value;n!=NaN?this.setState({codigo_producto:n,descripcion:"",establecimiento:"",existencia_piezas:"",fecha:""}):this.setState({codigo_producto:""})}},{key:"buscar_producto",value:function(n){this.state.codigo_producto!=NaN&&this.state.codigo_producto!=""&&this.state.codigo_producto!=null?this.props.establecimiento!=""?this.obtener_producto_folio():alert("Falta Seleccionar Establecimiento!!!"):alert("Falta Codigo!!!");n.preventDefault()}},{key:"obtener_producto_folio",value:function(){var n=this;conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/obtener_productos_folio",{folio:this.state.codigo_producto,establecimiento:this.props.establecimiento},function(t){if(t.d.length>0){var i=t.d[0];n.setState(i);n.on_seleccionar(i);document.getElementById("dialog").style.display="none"}else n.setState({codigo_producto:"",descripcion:"",establecimiento:"",existencia_piezas:"",fecha:""}),alert("No Encontrado!!!")})}}]),t}(React.Component),Clasificado_Filtro_Productos=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={producto:"",clase:"",categoria:"",familia:"",linea:"",talla:""}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this;return React.createElement("div",{className:"panel-body",style:{height:"400px"}},React.createElement("h4",null,"FILTRO PRODUCTO INVENTARIO PARCIAL"),React.createElement("table",{className:"table ",style:{width:"100%"}},React.createElement("tbody",null,React.createElement(Item_filtro,{titulo:"PRODUCTOS",valor:this.state.producto,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.producto,buscar:function(){return n.buscar("producto",n.state.producto)},tipo_filtro:function(t){return n.tipo_filtro("producto",t)}}),React.createElement(Item_filtro,{titulo:"CLASES",valor:this.state.clase,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.clase,buscar:function(){return n.buscar("clase_producto",n.state.clase)},tipo_filtro:function(t){return n.tipo_filtro("clase_producto",t)}}),React.createElement(Item_filtro,{titulo:"CATEGORIAS",valor:this.state.categoria,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.categoria,buscar:function(){return n.buscar("Categoria",n.state.categoria)},tipo_filtro:function(t){return n.tipo_filtro("Categoria",t)}}),React.createElement(Item_filtro,{titulo:"FAMILIA",valor:this.state.familia,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.familia,buscar:function(){return n.buscar("familia",n.state.familia)},tipo_filtro:function(t){return n.tipo_filtro("familia",t)}}),React.createElement(Item_filtro,{titulo:"LINEA",valor:this.state.linea,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.linea,buscar:function(){return n.buscar("linea_producto",n.state.linea)},tipo_filtro:function(t){return n.tipo_filtro("linea_producto",t)}}),React.createElement(Item_filtro,{titulo:"TALLA",valor:this.state.talla,borrar:this.borrar.bind(this),resultado:this.props.resultados_filtro.talla,buscar:function(){return n.buscar("talla",n.state.talla)},tipo_filtro:function(t){return n.tipo_filtro("talla",t)}}))))}},{key:"tipo_filtro",value:function(n,t){this.props.tipo_filtro(n,t);this.props.deshacer();var i={producto:"",clase:"",categoria:"",familia:"",linea:"",talla:""},r=t.target.value;switch(n){case"producto":i.producto=r;break;case"clase_producto":i.clase=r;break;case"familia":i.familia=r;break;case"linea_producto":i.linea=r;break;case"talla":i.talla=r;break;case"Categoria":i.categoria=r}this.setState(i)}},{key:"buscar",value:function(n,t){this.props.buscar(n,t)}},{key:"borrar",value:function(){this.props.deshacer();this.setState({producto:"",clase:"",categoria:"",familia:"",linea:"",talla:""})}}]),t}(React.Component),Modal_clasificadores_productos=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.contador={cantidad:-1,inicio:0,termino:99};this.state={filtro:"",lista_seleccion:[]}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{id:"mod_productos",className:"modal_generica"},React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel panel-heading",style:{color:"azure",background:"rgb(87, 182, 141)"}},React.createElement("span",{className:"glyphicon glyphicon-remove-circle close",onClick:this.cerrar.bind(this)}),React.createElement("label",null,"FILTRO DE CLASIFICADORES")),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"form-group"},React.createElement("span",{className:"glyphicon glyphicon-filter"}," BUSQUEDA DE CLASIFICADOR"),React.createElement("input",{type:"text",onChange:this.filtrado_tabla.bind(this),className:"form-control",placeholder:"Filtro..."})),React.createElement("div",{id:"contenedor_filtro_productos"},React.createElement("table",{className:"table "},React.createElement("thead",{className:"panel panel-info"},React.createElement("tr",{className:"info"},React.createElement("th",null,"CODIGO"),React.createElement("th",null,"DESCRIPCION"),React.createElement("th",null," "))),React.createElement("tbody",null,this.datos_tabla()))),this.botones_pie_tabla(),React.createElement("span",{className:"btn btn-primary btn-block",style:{marginTop:"15px"},onClick:this.on_guardar_seleccion.bind(this)},React.createElement("i",{className:"glyphicon glyphicon-download-alt"}," "),React.createElement("label",{style:{marginLeft:"5px"}},"CARGAR")))))}},{key:"on_guardar_seleccion",value:function(){var n=this.state.lista_seleccion.toString();this.props.seleccion_clasificador(n);this.setState({lista_seleccion:[]});document.getElementById("mod_productos").style.display="none"}},{key:"cerrar",value:function(){document.getElementById("mod_productos").style.display="none";this.contador={cantidad:-1,inicio:0,termino:99};this.setState({lista_seleccion:[]})}},{key:"on_seleccionar",value:function(n){var t=[];t=this.props.limitador_filtro=="in"?this.seleccion_lista(n):this.seleccion_unica(n);this.setState({lista_seleccion:t})}},{key:"filtrado_tabla",value:function(n){this.setState({filtro:n.target.value})}},{key:"seleccion_lista",value:function(n){var t=this.state.lista_seleccion.map(function(n){return n}),i;return t.includes("''"+n.folio+"''")?(i=t.indexOf("''"+n.folio+"''"),i>-1&&t.splice(i,1)):t.push("''"+n.folio+"''"),t}},{key:"seleccion_unica",value:function(n){var t=this.state.lista_seleccion.map(function(n){return n});return t.includes("''"+n.folio+"''")?[]:["''"+n.folio+"''"]}},{key:"botones_pie_tabla",value:function(){var n=new Array(3);return n[0]=React.createElement("i",{className:"btn btn-link"},this.contador.cantidad>99?"100":this.contador.cantidad),n[1]=React.createElement("i",{className:"btn btn-link"}," DE "),n[2]=React.createElement("i",{className:"btn btn-link"},this.contador.cantidad),React.createElement("div",{className:"panel panel-info",style:{display:"flex",height:"45px","align-items":"center"}},n)}},{key:"datos_tabla",value:function(){var n=this,i=this.state.filtro.toUpperCase(),t=this.props.clasificadores.filter(function(n){return n.folio.toString().search(i)>-1||n.clasificador.toUpperCase().search(i)>-1}),r;return this.contador.cantidad=t.length,r=function(t){return n.state.lista_seleccion.includes(t)?"glyphicon glyphicon-check":"glyphicon glyphicon-unchecked"},t=t.filter(function(t,i){return i>=n.contador.inicio&&i<=n.contador.termino}),t.map(function(t){return React.createElement("tr",{onClick:function(){return n.on_seleccionar(t)}},React.createElement("td",{style:{width:"60px",textAlign:"center"}},t.folio),React.createElement("td",null,t.clasificador),React.createElement("td",{style:{width:"60px",textAlign:"center",fontSize:"25px"}},React.createElement("i",{className:r("''"+t.folio+"''")})))})}}]),t}(React.Component),Item_filtro=function(n){function t(){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var t=this,n=function(n){return n===t.props.valor};return React.createElement("tr",null,React.createElement("td",{style:{width:"90px"}},React.createElement("label",null,this.props.titulo)),React.createElement("td",{style:{width:"110px"}},React.createElement("select",{className:"form-control",onChange:this.props.tipo_filtro},React.createElement("option",{value:"",selected:n("")},"TODOS"),React.createElement("option",{value:"in",selected:n("in")},"LISTA "),React.createElement("option",{value:"=",selected:n(" =")},"IGUAL "),React.createElement("option",{value:">",selected:n(">")},"MAYOR "),React.createElement("option",{value:"<",selected:n("<")},"MENOR "),React.createElement("option",{value:"!=",selected:n("!=")},"DIFERENTE"))),React.createElement("td",null,React.createElement("input",{type:"text",disabled:!0,value:this.props.resultado!="0"?this.props.resultado:"",className:"form-control"})),React.createElement("td",{style:{width:"40px"}},React.createElement("a",{className:"glyphicon glyphicon-plus btn btn-info",onClick:this.props.buscar})),React.createElement("td",{style:{width:"40px"}},React.createElement("a",{className:"glyphicon glyphicon-trash btn btn-danger",onClick:this.props.borrar})))}}]),t}(React.Component),Modal_Entrada_cantidad=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={texto:"0",signo:"+",lista:[]}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this;return React.createElement("div",{className:"modal_generica",id:"m",style:{display:"none",position:"fixed"}},React.createElement("div",{className:"panel panel-default",style:{position:"fixed",width:"80%",height:"450px",maxWidth:"550px"}},React.createElement("div",{className:"panel-heading ",style:{background:"#77d6f5",color:"azure"}},React.createElement("span",{className:"glyphicon glyphicon-remove-circle red close",onClick:this.cerrar.bind(this)}),React.createElement("label",null,"Existencia Fisica.")),React.createElement("div",{className:"panel panel-body "},React.createElement("div",{className:"panel-info"},React.createElement("strong",{style:{marginLeft:"10px",borderBottom:"solid 1px black",color:"black"}},this.props.producto.codigo_producto),React.createElement("label",{style:{marginLeft:"10px",color:"black"}},this.props.producto.descripcion),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"form-group",style:{width:"30%",display:"inline-block"}},React.createElement("label",null,"Suma:"),React.createElement("label",{className:"form-control",style:{textAlign:"right",fontSize:"20px"}},this.suma_lista())),React.createElement("div",{className:"form-group",style:{width:"30%",display:"inline-block"}},React.createElement("label",null,"Fisico:"),React.createElement("label",{className:"form-control",style:{textAlign:"right",fontSize:"20px"}},this.props.producto.real)),React.createElement("div",{className:"form-group",style:{width:"40%",display:"inline-block"}},React.createElement("label",null,"Total:"),React.createElement("label",{className:"form-control",id:"vista_texto_total",style:{textAlign:"right",fontSize:"20px"}},this.state.signo+" "+this.state.texto||"0")))),React.createElement("div",{className:"panel-success",style:{" justify-content":"center",display:"flex"}},React.createElement("div",{className:"panel panel-info",style:{width:"30%",height:"295px",overflowX:"auto",overflowY:"auto"}},this.vista_lista()),React.createElement("table",{className:"table",style:{"align-items":"center",marginLeft:"0px",background:"azure",width:"70%"}},React.createElement("tr",null,React.createElement("th",{style:{background:"azure"}},React.createElement("label",{className:"btn glyphicon glyphicon-circle-arrow-left",style:{width:"95%",height:"50px",fontSize:"22px",color:"orange",marginLeft:"2px",marginTop:"2px"},onClick:this._borrar.bind(this)}," ")),React.createElement("th",{style:{background:"azure"}},React.createElement("label",{className:"btn glyphicon glyphicon-minus",style:{width:"95%",height:"50px",fontSize:"22px",color:"green",marginLeft:"2px",marginTop:"2px"},onClick:function(){return n._signo("-")}}," ")),React.createElement("th",{style:{background:"azure"}},React.createElement("label",{className:"btn glyphicon glyphicon-plus",style:{width:"95%",height:"50px",fontSize:"22px",color:"blue",marginLeft:"2px",marginTop:"2px"},onClick:function(){return n._signo("+")}}," "))),React.createElement("tr",{style:{textAlign:"center"}},this.boton_num(7),this.boton_num(8),this.boton_num(9)),React.createElement("tr",{style:{textAlign:"center"}},this.boton_num(4),this.boton_num(5),this.boton_num(6)),React.createElement("tr",{style:{textAlign:"center"}},this.boton_num(1),this.boton_num(2),this.boton_num(3)),React.createElement("tr",null,this.boton_num(0),this.boton_num("."),React.createElement("th",{style:{background:"azure"}},React.createElement("label",{className:"btn btn-primary glyphicon glyphicon-share",style:{width:"95%",height:"50px",fontSize:"22px",marginLeft:"2px",marginTop:"2px"},onClick:this._agregar_lista.bind(this)}," "))))),React.createElement("span",{className:"btn btn-success btn-block glyphicon glyphicon-download-alt",onClick:this._salvar.bind(this)},React.createElement("label",{style:{marginLeft:"5px"}},"Listo")))))}},{key:"_boton",value:function(n){var t=this.state.texto.toString(),i=t.split(".");t==0&&(t="");t+n<=1e5&&t.length<9?(n>0&&n<10?t+=n:t.length>0&&n==0?t+=n:i.length==1&&(t=t.length>0?t+=n:"0"+n),this.state.texto==""&&this.setState({texto:this.props.producto.real}),this.setState({texto:t})):(document.getElementById("vista_texto_total").style.border="solid 3px red",setTimeout(function(){return document.getElementById("vista_texto_total").style.border=""},1e3))}},{key:"_agregar_lista",value:function(){var n=this.state.lista,t=this.state.texto,i=this.state.signo=="-"?"-"+t:t;n.push(parseFloat(i));this.setState({lista:n,texto:"0",signo:"+"})}},{key:"_signo",value:function(n){this.setState({signo:n})}},{key:"_salvar",value:function(){var n=this.props.producto.real;this.state.lista.forEach(function(t){return n+=t});n+=parseInt(this.state.texto);n>=0&&(this.props.seleccion(n),this.setState({texto:"0",signo:"+",lista:[]}),document.getElementById("codigo_barra").select())}},{key:"_borrar",value:function(){var n=this.state.texto.toString();n=n.length>1?n.toString().substr(0,n.length-1):0;this.setState({texto:n})}},{key:"cerrar",value:function(){this.setState({texto:"0",signo:"+",lista:[]});document.getElementById("m").style.display="none";document.getElementById("codigo_barra").select()}},{key:"_eliminar_lista",value:function(n){var t=this.state.lista;t.splice(n,1);confirm("Eliminar...")&&this.setState({lista:t})}},{key:"boton_num",value:function(n){var t=this;return React.createElement("th",{style:{background:"azure"}},React.createElement("label",{className:"btn btn-info",style:{width:"95%",height:"50px",fontSize:"22px",marginLeft:"2px",marginTop:"2px"},onClick:function(){return t._boton(n)}},n))}},{key:"boton_accion",value:function(n){var t=this;return React.createElement("th",{style:{background:"azure"}},React.createElement("label",{className:"btn btn-info",style:{width:"95%",height:"50px",fontSize:"22px",marginLeft:"2px",marginTop:"2px"},onClick:function(){return t._boton(n)}}))}},{key:"suma_lista",value:function(){var n=this.props.producto.real;return this.state.lista.forEach(function(t){return n+=t}),n}},{key:"vista_lista",value:function(){var n=this;return this.state.lista.map(function(t,i){return React.createElement("table",{className:"table"},React.createElement("tr",null,React.createElement("th",{style:{textAlign:"center"}},i+1),React.createElement("th",null,React.createElement("label",{className:"form-control",style:{textAlign:"right"}},t," PZ")),React.createElement("td",null,React.createElement("i",{className:"glyphicon glyphicon-remove",onClick:function(){return n._eliminar_lista(i)},style:{marginLeft:"5px"}}))))})}}]),t}(React.Component),Modal_vista_prductos_existencia=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={filtro:"",producto:{codigo_producto:"",descripcion:"",existencia_piezas:"",real:0,fecha:"",ediciones:0}}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"modal_generica",id:this.props.modal,style:{display:"none"}},React.createElement("div",{className:"panel panel-group",style:{maxWidth:"600px",width:"90%"}},React.createElement("div",{className:"panel-heading",style:{background:"#6db65d",color:"azure"}},React.createElement("span",{className:"glyphicon glyphicon-remove-circle red close",onClick:this.cerrar.bind(this)}),React.createElement("label",null,this.props.lista.length),React.createElement("label",{style:{marginLeft:"5px"}},this.props.titulo)),React.createElement("div",{className:"panel panel-body",style:{height:"600px"}},React.createElement("div",{className:"panel panel-info"},React.createElement("div",{className:"form-group"},React.createElement("label",{"for":"text",className:""},"Descripcion :"),React.createElement("input",{value:this.state.producto.descripcion,disabled:!0,className:"form-control",placeholder:"Descriocion Producto..."}))),React.createElement("div",{className:"form-group"},React.createElement("input",{value:this.state.filtro,className:"form-control",onChange:this.on_filtrar.bind(this),placeholder:"Filtro Producto..."})),React.createElement("div",{className:"panel panel-success",style:{height:"70%",overflowX:"auto",overflowY:"auto"}},React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",{className:"success"},React.createElement("th",null,"Folio"),React.createElement("th",null,"Descripcion"),React.createElement("th",null,"Existencia"),React.createElement("th",null,"HH/MM/SS"))),React.createElement("tbody",null,this.datos_tabla()))),React.createElement("span",{className:"btn btn-success glyphicon glyphicon-ok btn-block",onClick:this.on_seleccion.bind(this)},React.createElement("label",{style:{marginLeft:"5px"}}," Seleccionar")))))}},{key:"on_filtrar",value:function(n){this.setState({filtro:n.target.value})}},{key:"on_seleccion",value:function(){this.state.producto.codigo_producto>0?(this.props.seleccion(this.state.producto),this.setState({filtro:"",producto:{codigo_producto:"",descripcion:"",existencia_piezas:"",real:0,fecha:"",ediciones:0}}),document.getElementById(this.props.modal).style.display="none"):alert("Seleccione Producto!!!")}},{key:"seleccion_tabla",value:function(n){this.setState({producto:n})}},{key:"cerrar",value:function(){document.getElementById(this.props.modal).style.display="none"}},{key:"datos_tabla",value:function(){var t=this,i=this.state.filtro.toString().toUpperCase(),n=this.props.lista.filter(function(n){return n.descripcion.toUpperCase().search(i)>-1||n.codigo_producto.toString().search(i)>-1}),r=function(n){return n=n.split(" "),n[1]},u=function(n){return n==t.state.producto.codigo_producto?{background:"#a8faae"}:{background:""}};return n=n.filter(function(n,t){return t<300}),n.map(function(n){return React.createElement("tr",{onClick:function(){return t.seleccion_tabla(n)},style:u(n.codigo_producto)},React.createElement("td",null,n.codigo_producto),React.createElement("td",null,n.descripcion),React.createElement("td",null,React.createElement("label",{className:"form-control",style:{textAlign:"right",width:"70px"}},n.real)),React.createElement("td",null,React.createElement("label",null,r(n.fecha))))})}}]),t}(React.Component),Tabla_revicion_inventario_parcial=function(n){function t(){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("table",{className:"table table-striped"},React.createElement("thead",{className:"panel panel-info"},React.createElement("tr",{className:"info"},React.createElement("th",{style:{width:"80px",textAlign:"center"}},"CODIGO"),React.createElement("th",{style:{textAlign:"center"}},"DESCRIPCION"),React.createElement("th",{style:{width:"80px",textAlign:"center"},colspan:"3"},"EXIST. FISICA"))),React.createElement("tbody",null,this.datos_tabla()))}},{key:"datos_tabla",value:function(){var n=this;return this.props.estado.lista.map(function(t,i){return React.createElement("tr",null,React.createElement("td",{style:{width:"80px",textAlign:"center"}},t.codigo_producto),React.createElement("td",null,t.descripcion),React.createElement("td",{style:{width:"80px",textAlign:"center"}},React.createElement("label",{className:"form-control",style:{textAlign:"right"}},t.real)),React.createElement("td",{style:{width:"30px",textAlign:"center",fontSize:"20px"}},React.createElement("span",{className:"btn btn-primary glyphicon glyphicon-edit",onClick:function(){return n.props.on_editar_producto(t,i)}})),React.createElement("th",{style:{width:"30px",textAlign:"center",fontSize:"20px"}},React.createElement("span",{className:"btn btn-danger fa fa-trash-o",onClick:function(){return n.props.on_eliminar_producto(i)}})))})}}]),t}(React.Component),Boton_cavecera_modal_inventarios=function(n){return React.createElement("i",{className:"btn btn-"+n.boton+" btn-sm glyphicon "+n.icono,onClick:n.on_},React.createElement("label",{style:{marginLeft:"5px"}},n.titulo))},Moda_revicion_inventario_parcial=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.producto={codigo_producto:"",descripcion:"",existencia_piezas:"",real:0,fecha:"",ediciones:0};this.lista_pendientes=[];this.posicion=-1;this.state={lista:[]}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this;return React.createElement("div",{className:"modal_generica",id:"modal_invemtario_parcial"},React.createElement("div",{className:"panel panel-default",style:{marginTop:"5px",height:"98%",width:"98%",maxWidth:"900px"}},React.createElement("div",{className:"panel panel-heading",style:{color:"azure",background:"rgba(45, 137, 237, 0.97)"}},React.createElement("span",{className:"glyphicon glyphicon-remove-circle close",onClick:this.cerrar.bind(this)}),React.createElement("span",{className:"fa fa-cubes"}," "),React.createElement("label",{style:{marginLeft:"5px"}}," INVENTARIOS PARCIALES")),React.createElement("div",{className:"panel-body",style:{height:"87%",marginTop:"-30px"}},React.createElement(Filtro_producto_folio,{establecimiento:this.props.establecimiento,nombre_comp:"codigo_barra",obtener_producto:this.on_obtener_producto.bind(this)}),React.createElement("div",{className:"btn-group"},React.createElement(Boton_cavecera_modal_inventarios,{on_:function(){return n.on_generar_pendientes()},boton:"success",icono:"glyphicon-flash",titulo:"Pendiente."}),React.createElement(Boton_cavecera_modal_inventarios,{on_:function(){return n.on_revisados()},boton:"success",icono:"glyphicon-list-alt",titulo:"capturado."}),React.createElement(Boton_cavecera_modal_inventarios,{on_:function(){return n.on_total()},boton:"success",icono:"glyphicon-asterisk",titulo:"inventario."}),React.createElement(Boton_cavecera_modal_inventarios,{on_:function(){return n.imprimir()},boton:"success",icono:"glyphicon-print",titulo:"Reporte."})),React.createElement("div",{className:"panel panel-info",style:{height:"80%","overflow-x":"auto","overflow-y":"scroll"}},React.createElement(Tabla_revicion_inventario_parcial,{estado:this.state,on_editar_producto:this.on_editar_producto.bind(this),on_eliminar_producto:this.on_eliminar_producto.bind(this)}))),React.createElement("i",{className:"btn btn-info btn-block glyphicon glyphicon-save",onClick:this.finalizar_inventario.bind(this)},React.createElement("label",{style:{marginLeft:"10px"}},"GUARDAR INVENTARIO.")),React.createElement(Modal_Entrada_cantidad,{producto:this.producto,seleccion:this.agregar_producto_a_lista.bind(this)}),React.createElement(Modal_vista_prductos_existencia,{modal:"modal_vista_pendientes",titulo:"Productos Pendientes",seleccion:this.on_obtener_producto.bind(this),lista:this.lista_pendientes}),React.createElement(Modal_vista_prductos_existencia,{modal:"modal_vista_total",titulo:" Productos Inventario.",seleccion:this.on_obtener_producto.bind(this),lista:this.props.inventario}),React.createElement(Modal_vista_prductos_existencia,{modal:"modal_vista_revisados",titulo:" Productos Capturados.",seleccion:this.on_obtener_producto.bind(this),lista:this.state.lista})))}},{key:"imprimir",value:function(){var u=this.crear_tabla_imprimir();console.log(u);var t=window.open("","Imprimir","width=320"),f=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],e=document.createElement("title"),o=document.createElement("h4"),i=document.createElement("strong"),r=document.createElement("label"),n=new Date;e.textContent="Reporte De Inventario Parcial "+this.props.establecimiento+" "+n.getDate()+"/"+f[n.getMonth()]+"/"+n.getFullYear();o.textContent="Reporte De Inventario Parcial";i.textContent=n.getDate()+"/"+f[n.getMonth()]+"/"+n.getFullYear();r.textContent=this.props.establecimiento;r.style.marginLeft="0";i.style.marginLeft="50px";t.document.head.append(e);t.document.body.append(o,r,i,u);t.document.close();t.print();t.close()}},{key:"crear_tabla_imprimir",value:function(){var n=document.createElement("table"),t=document.createElement("tr"),i=document.createElement("td"),r=document.createElement("td"),u=document.createElement("td");return i.innerText="codigo",r.innerText="Descripcion",u.textContent="Cantidad",t.append(i,r,u),t.style="border-bottom:solid 2px black",n.append(t),this.props.inventario.forEach(function(t){var u=document.createElement("td"),f=document.createElement("td"),i=document.createElement("td"),r;u.innerText=t.codigo_producto;f.innerText=t.descripcion;i.textContent="|";i.style="border-bottom:solid 2px black;width:30px;color:azure";u.style.width="30px";f.style.width="110px";i.style.width="70px";r=document.createElement("tr");r.append(u,f,i);r.style=" border-bottom:solid 1px blue ";n.append(r);n.style=" border:solid 1px gray;width:210px;font-size:10px"}),n}},{key:"on_obtener_producto",value:function(n){console.log(n);var i=this.props.inventario.findIndex(function(t){return t.codigo_producto==n.codigo_producto}),t=this.state.lista.findIndex(function(t){return t.codigo_producto==n.codigo_producto});if(this.producto={codigo_producto:n.codigo_producto,descripcion:n.descripcion,existencia_piezas:n.existencia_piezas,real:n.real,fecha:n.fecha,ediciones:n.ediciones,costo_promedio:n.costo_promedio,precio_venta:n.precio_venta,ultimo_costo:n.ultimo_costo},i==-1)confirm("EL PRODUCTO : "+n.descripcion+"\n NO EXISTE EN LA SELECCION\n ¿AGREGAR?")&&(document.getElementById("m").style.display="flex",this.setState({}));else if(t==-1)document.getElementById("m").style.display="flex",this.setState({});else if(t>=0&&confirm("EL PRODUCTO : "+n.descripcion+"\n SE ENCUENTRA EN REVICION\n ¿MODIFICAR?\n"+n.fecha)){this.producto.real=this.state.lista[t].real;this.producto.fecha=n.fecha;this.on_editar_producto(this.producto,t)}}},{key:"on_editar_producto",value:function(n,t){this.posicion=t;this.producto={codigo_producto:n.codigo_producto,descripcion:n.descripcion,existencia_piezas:n.existencia_piezas,real:n.real,fecha:n.fecha,ediciones:n.ediciones,costo_promedio:n.costo_promedio,precio_venta:n.precio_venta,ultimo_costo:n.ultimo_costo};this.setState({});document.getElementById("m").style.display="flex"}},{key:"on_eliminar_producto",value:function(n){var i=this.state.lista[n].descripcion,t;confirm("¿Eliminar? \n"+i)&&(t=this.state.lista,t.splice(n,1),this.setState({lista:t}))}},{key:"agregar_producto_a_lista",value:function(n){var r=this,t=this.state.lista,i=t.findIndex(function(n){return n.codigo_producto==r.producto.codigo_producto});i==-1?(this.producto.real=n,t.push(this.producto)):(t[i].ediciones+=1,t[i].real=n,t[i].fecha=this.producto.fecha,this.posicion=-1);this.producto={codigo_producto:"",descripcion:"",existencia_piezas:"",real:0,fecha:"",ediciones:0,costo_promedio:0,precio_venta:0,ultimo_costo:0};this.setState({lista:t});document.getElementById("m").style.display="none"}},{key:"on_generar_pendientes",value:function(){document.getElementById("dialog").style.display="block";this.generar_pendientes();document.getElementById("dialog").style.display="none";document.getElementById("modal_vista_pendientes").style.display="flex"}},{key:"on_total",value:function(){document.getElementById("dialog").style.display="block";this.empatar_total_fisico();document.getElementById("dialog").style.display="none";document.getElementById("modal_vista_total").style.display="flex"}},{key:"on_revisados",value:function(){document.getElementById("modal_vista_revisados").style.display="flex"}},{key:"finalizar_inventario",value:function(){var r=this,n=new Date,u=n.getHours()>9?n.getHours():"0"+n.getHours(),f=n.getMinutes()>9?n.getMinutes():"0"+n.getMinutes(),e=n.getSeconds()>9?n.getSeconds():"0"+n.getSeconds(),o=u+":"+f+":"+e,t,i;this.generar_pendientes();this.lista_pendientes.length==0?(t=this.state.lista.map(function(n){return n.establecimiento=r.props.establecimiento,n.fecha=n.fecha+" - "+o,n}),this.guardado_inventario(t)):(i="Productos Pendientes:\n"+this.lista_pendientes.length+" pz",alert(i))}},{key:"cerrar",value:function(){confirm("Al Cerrar Se Perderan Los Cambios!!!\n¿Cerrar?")&&(this.setState({lista:[]}),document.getElementById("modal_invemtario_parcial").style.display="none")}},{key:"generar_pendientes",value:function(){var n=this;this.lista_pendientes=[];this.props.inventario.forEach(function(t){var i=n.state.lista.findIndex(function(n){return n.codigo_producto==t.codigo_producto});i==-1&&n.lista_pendientes.push(t)});this.setState({})}},{key:"empatar_total_fisico",value:function(){var n=this.state.lista;this.props.inventario.forEach(function(t){var i=n.findIndex(function(n){return n.codigo_producto==t.codigo_producto});i>-1?(t.real=n[i].real,t.fecha=n[i].fecha):t.real=0});this.setState({})}},{key:"guardado_inventario",value:function(n){var t=conexion_ajax("servicios/inventarios_parciales/conexiones.asmx/Guardar_inventario_grupo_izagar",{responsable:ID_SCOI,inventario:n});t>0?(document.getElementById("modal_invemtario_parcial").style.display="none",alert("SE GUARDARON "+t+" REGISTROS."),this.setState({lista:[]})):alert(t)}}]),t}(React.Component),App=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.lista_establecimientos=[];this.lista_clasificadores=[];this.lista_productos=[];this.resultados_filtro={producto:"0",clase:"0",categoria:"0",familia:"0",linea:"0",talla:"0"};this.state={folio_establecimiento:-1,establecimiento:"",codigo_producto:"",descripcion:"",existencia:-1,captura:0,fecha:"",modificacion:0,condicion:"'0','0','0','0','0','0'",tipo_filtro:"",limitador_filtro:""};this.obtener_establecimientos()}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement(Cabecera,{establecimientos:this.lista_establecimientos,on_establecimiento:this.on_cambio_estableciomiento.bind(this),revisar:this.obtener_productos.bind(this),estado:this.state}),React.createElement(Filtro_producto_folio,{establecimiento:this.state.establecimiento,obtener_producto:this.obtener_producto.bind(this)})),React.createElement(Clasificado_Filtro_Productos,{tipo_filtro:this.filtro.bind(this),resultados_filtro:this.resultados_filtro,deshacer:this.on_deshacer.bind(this),buscar:this.buscar.bind(this)}),React.createElement(Modal_clasificadores_productos,{clasificadores:this.lista_clasificadores,limitador_filtro:this.state.limitador_filtro,seleccion_clasificador:this.seleccion_clasificador.bind(this)}),React.createElement(Moda_revicion_inventario_parcial,{establecimiento:this.state.establecimiento,folio_establecimiento:this.state.folio_establecimiento,inventario:this.lista_productos}))}},{key:"on_cambio_estableciomiento",value:function(n){var t="",i=n.target.value;i>0&&(t=this.lista_establecimientos.filter(function(n){return n.folio==i})[0].nombre);this.setState({folio_establecimiento:i,establecimiento:t,codigo_producto:"",descripcion:"",existencia:-1,captura:0,fecha:"",modificacion:0,condicion:"'"+t+"','0','0','0','0','0','0'",tipo_filtro:"",limitador_filtro:""})}},{key:"on_deshacer",value:function(){this.resultados_filtro={producto:"0",clase:"0",categoria:"0",familia:"0",linea:"0",talla:"0"};this.setState({tipo_filtro:"",limitador_filtro:"",codigo_producto:"",descripcion:""})}},{key:"filtro",value:function(n,t){this.setState({tipo_filtro:n,limitador_filtro:t.target.value})}},{key:"seleccion_clasificador",value:function(n){this.resultados_filtro={producto:"0",clase:"0",categoria:"0",familia:"0",linea:"0",talla:"0"};n=this.state.limitador_filtro=="in"?this.state.limitador_filtro+" ("+n+")":this.state.limitador_filtro+" "+n;switch(this.state.tipo_filtro){case"producto":this.resultados_filtro.producto=n;break;case"clase_producto":this.resultados_filtro.clase=n;break;case"familia":this.resultados_filtro.familia=n;break;case"linea_producto":this.resultados_filtro.linea=n;break;case"talla":this.resultados_filtro.talla=n;break;case"Categoria":this.resultados_filtro.categoria=n}var t="'"+this.state.establecimiento+"','"+this.resultados_filtro.producto+"','"+this.resultados_filtro.clase+"','"+this.resultados_filtro.categoria+"','"+this.resultados_filtro.familia+"','"+this.resultados_filtro.linea+"','"+this.resultados_filtro.talla+"'";this.setState({condicion:t})}},{key:"obtener_producto",value:function(n){this.resultados_filtro={producto:"0",clase:"0",categoria:"0",familia:"0",linea:"0",talla:"0"};this.resultados_filtro.producto="=(''"+n.codigo_producto+"'')";var t="'"+this.state.establecimiento+"','=(''"+n.codigo_producto+"'')','0','0','0','0','0'  ";this.setState({limitador_filtro:"=",tipo_filtro:"producto",condicion:t});document.getElementById("dialog").style.display=""}},{key:"buscar",value:function(n,t){var i="";switch(n){case"producto":i="productos";break;case"clase_producto":i="clases_productos";break;case"familia":i="familias";break;case"linea_producto":i="lineas_productos";break;case"talla":i="tallas";break;case"Categoria":i="Categorias"}this.state.establecimiento!=""?t!=""?(n=="producto"?this.obtener_productos_clasificadores():this.obtener_clasificadores(i,n),this.setState({tipo_filtro:n,limitador_filtro:t})):alert("EL LIMITADOR DEL FILTRO PARA '"+n+'\' ES:\n "TODOS".'):alert("SELECCIONE ESTABLECIMIENTO!!!")}},{key:"obtener_establecimientos",value:function(){var n=this;conexion_api_from_body("servicios/matriz/conexiones.asmx/obtener_establecimientos",{},function(t){n.lista_establecimientos=t.d;n.setState({folio_establecimiento:-1})})}},{key:"obtener_productos_clasificadores",value:function(){var n=this;conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/obtener_productos_clasificador",{est:this.state.establecimiento},function(t){n.lista_clasificadores=t.d;document.getElementById("mod_productos").style.display="flex";n.setState({})})}},{key:"obtener_clasificadores",value:function(n,t){var i=this;conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/obtener_clasificadores",{tabla:n,columna:t,condicion:""},function(n){i.lista_clasificadores=n.d;document.getElementById("mod_productos").style.display="flex";i.setState({})})}},{key:"obtener_productos",value:function(){var n=this;this.state.establecimiento!=""?conexion_api_from_body("servicios/inventarios_parciales/conexiones.asmx/obtener_productos",{condicion:this.state.condicion},function(t){n.lista_productos=t.d;n.setState({codigo_producto:""});document.getElementById("modal_invemtario_parcial").style.display="flex"}):alert("SELECCIONE ESTABLECIMIENTO!!!")}}]),t}(React.Component);ReactDOM.render(React.createElement(App,null),document.getElementById("container"));