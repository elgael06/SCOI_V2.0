"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},Tabla=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.lista__temperaturas_x_tiempos=conexion_ajax("servicios/datos_tabla.asmx/obtener_temperaturas_x_tiempos");this.cuerpo=[];this.establecimientos();this.boton_regresar=null;this.boton_regresar_1=null;this.cambia_nombre=this.props.nombre_establecimiento||"Establecimientos";this.setState({folio_unidad:0,nombre_establecimiento:"",nombre_area:"",nombre_unidad:"",limite_inferior:0,limite_superior:0});console.log(this.lista_fallos)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("div",{style:estilo_tabla},React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",{style:estilo_cabecera_tabla},React.createElement("td",null,React.createElement("br",null),React.createElement("br",null),React.createElement("br",null),React.createElement("div",{className:"single-line "},this.boton_regresar," ",this.cambia_nombre)),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null,"Temperatura Actual"),React.createElement("td",null,"Promedio De Teperatura De La Ultima Hora"),React.createElement("td",null,"Promedio De Teperatura De Las Ultimas 5 Horas"),React.createElement("td",null,"Promedio De Teperatura De Las Ultimas 24 Horas"),React.createElement("td",null,"Promedio De Teperatura De Los Ultimos 7 Dias"),React.createElement("td",null,"Promedio De Teperatura De Los Ultimos 15 Dias"))),React.createElement("tbody",null,this.cuerpo))))}},{key:"nomb",value:function(n){return React.createElement("span",{className:"texto_cavecera"}," ",n.nombre_establecimiento," ")}},{key:"establecimientos",value:function(){var r=this;this.cambia_nombre="Establecimientos";var t=[],n={folio_establecimiento:0,nombre_establecimiento:"",folio_area:0,nombre_area:"",folio_unidad:0,nombre_unidad:"",temperatura:0,limite_inferior:0,limite_superior:0},i=[];this.lista__temperaturas_x_tiempos.forEach(function(u,f){var o,e;f==0&&(n=u);n.folio_establecimiento==u.folio_establecimiento?(e=0,t.push(u.temperatura),f==r.lista__temperaturas_x_tiempos.length-1&&(t.forEach(function(n){e+=n}),n.temperatura=e/t.length,i.push(n))):n.folio_establecimiento!=u.folio_establecimiento&&(o=0,t.forEach(function(n){o+=n}),n.temperatura=o/t.length,i.push(n),n=u,t=[u.temperatura],n.folio_establecimiento==u.folio_establecimiento&&(e=0,t.push(u.temperatura),f==r.lista__temperaturas_x_tiempos.length-1&&(t.forEach(function(n){e+=n}),n.temperatura=e/t.length,i.push(n))))});console.log(this.lista__temperaturas_x_tiempos);this.cuerpo=i.map(function(n,t){return React.createElement("tr",{key:n.nombre_establecimiento+t,onClick:function(){return r.areas(n)}},React.createElement("td",null,n.nombre_establecimiento),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null,n.temperatura_actual),React.createElement("td",null,n.promedio_temperatura_ultima_hora),React.createElement("td",null,n.promedio_temperatura_ultima_5_horas),React.createElement("td",null,n.promedio_temperatura_ultimas_24_horas),React.createElement("td",null,n.promedio_temperatura_ultimos_7_dias),React.createElement("td",null,n.promedio_temperatura_ultimos_15_dias))});this.setState({folio_establecimiento:0})}},{key:"areas",value:function(n){var i=this,t;this.cambia_nombre=this.nomb(n);this.boton_regresar=this.regresar_establecimientos();t=conexion_ajax("servicios/datos_tabla.asmx/obtener_lista_areas",{folio_establecimiento:n.folio_establecimiento});this.cuerpo=t.map(function(n,t){return React.createElement("tr",{key:n.nombre_area+t,onClick:function(){return i.unidades(n)}},React.createElement("td",null),React.createElement("td",null,React.createElement("div",null,React.createElement("div",{className:"single-line"},n.nombre_area," ",React.createElement("span",{className:"fa fa-fast-forward"})))),React.createElement("td",null),React.createElement("td",null,n.temperatura_actual),React.createElement("td",null,n.promedio_temperatura_ultima_hora),React.createElement("td",null,n.promedio_temperatura_ultima_5_horas),React.createElement("td",null,n.promedio_temperatura_ultimas_24_horas),React.createElement("td",null,n.promedio_temperatura_ultimos_7_dias),React.createElement("td",null,n.promedio_temperatura_ultimos_15_dias))});this.setState({folio_establecimiento:n.folio_establecimiento});console.log(t)}},{key:"unidades",value:function(n){var i=this;this.boton_regresar_1=this.regresar_areas(n);var t=conexion_ajax("servicios/datos_tabla.asmx/obtener_lista_unidades",{folio_establecimiento:this.state.folio_establecimiento,folio_area:n.folio_area}),r=function(n){var t=n.temperatura_actual<n.limite_inferior,i=n.temperatura_actual>n.limite_superior;return t?"Azul":i?"Rojo":""},u=function(n){var t=n.promedio_temperatura_ultima_hora<n.limite_inferior,i=n.promedio_temperatura_ultima_hora>n.limite_superior;return t?"Azul":i?"Rojo":""},f=function(n){var t=n.promedio_temperatura_ultima_5_horas<n.limite_inferior,i=n.promedio_temperatura_ultima_5_horas>n.limite_superior;return t?"Azul":i?"Rojo":""},e=function(n){var t=n.promedio_temperatura_ultimas_24_horas<n.limite_inferior,i=n.promedio_temperatura_ultimas_24_horas>n.limite_superior;return t?"Azul":i?"Rojo":""};this.cuerpo=t.map(function(n,t){return React.createElement("tr",{key:n.nombre_area+t},React.createElement("td",null),React.createElement("td",null,React.createElement("div",null,React.createElement("div",{className:"single-line"},n.nombre_area))),React.createElement("td",null,React.createElement("div",{className:"container"},React.createElement("br",null),React.createElement("div",{className:"single-line"},i.boton_regresar_1," ",n.nombre_unidad))),React.createElement("td",{className:r(n)},React.createElement("br",null),n.temperatura_actual),React.createElement("td",{className:u(n)},React.createElement("br",null),n.promedio_temperatura_ultima_hora),React.createElement("td",{className:f(n)},React.createElement("br",null),n.promedio_temperatura_ultima_5_horas),React.createElement("td",{className:e(n)},React.createElement("br",null),n.promedio_temperatura_ultimas_24_horas),React.createElement("td",null,React.createElement("br",null),n.promedio_temperatura_ultimos_7_dias),React.createElement("td",null,React.createElement("br",null),n.promedio_temperatura_ultimos_15_dias))});this.setState({folio_area:n.folio_area});console.log(t)}},{key:"regresar_establecimientos",value:function(){var n=this;return React.createElement("span",{className:"glyphicon glyphicon-home",onClick:function(){return n.establecimientos()}}," ")}},{key:"regresar_areas",value:function(n){var t=this;return React.createElement("span",{className:"fa fa-mail-reply",onClick:function(){return t.areas(n)}}," ")}}]),t}(React.Component),Tabla_fallos=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.lista_fallos=conexion_ajax("servicios/datos_tabla.asmx/cargar_lista");this.state={folio_unidad:0,nombre_establecimiento:"",nombre_area:"",nombre_unidad:"",limite_inferior:0,limite_superior:0,estado:"S",observaciones:"",id_scoi:0};this.lista=conexion_ajax("servicios/datos_tabla.asmx/obtener_lista_empleados");this.opcion_empleados=this.opcion_empleados.bind(this);this.on_empleados=this.on_empleados.bind(this);this.guardar=this.guardar.bind(this);this.on_estado=this.on_estado.bind(this);this.on_observaciones=this.on_observaciones.bind(this)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("center",null,React.createElement("h3",null,React.createElement("span",{style:{color:"#ffd600"},className:"fa fa-exclamation-triangle"}),React.createElement("label",{style:{color:"red",marginLeft:"10px",marginRight:"10px"}},"Fallas"),React.createElement("span",{style:{color:"#ffd600"},className:"fa fa-exclamation-triangle"}))),React.createElement("div",{style:estilo_tabla},React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",{style:estilo_cabecera_tabla_fallos},React.createElement("td",null,"Establecimiento"),React.createElement("td",null,"Area"),React.createElement("td",null,"Unidad"),React.createElement("td",null,"Limite min"),React.createElement("td",null,"Limite max"),React.createElement("td",null,"Estado"))),React.createElement("tbody",null,this.datos_fallos()))),React.createElement(Modal,{identidad:"mi_modal",cavecera:React.createElement("center",null,React.createElement("h3",null,"Datos De Unidad")),cuerpo:[this.cabecera(),this.datos_cuerpo_mi_moda()],rodilla:this.observaciones(),pie:this.empleados()}))}},{key:"on_modal1",value:function(n){document.getElementById("mi_modal").style.display="flex";console.log(this.state);var t=conexion_ajax("servicios/datos_tabla.asmx/obtener_temperaturas_unidad",{folio_unidad:n.folio_unidad});this.datos=t.map(function(n){return React.createElement("tr",{key:n.folio_unidad},React.createElement("td",null,n.fecha),React.createElement("td",null,n.hora),React.createElement("td",null,n.temperatura))});console.log(this.state);this.setState({nombre_establecimiento:n.nombre_establecimiento,estado:n.estado,nombre_area:n.nombre_area,nombre_unidad:n.nombre_unidad,folio_unidad:n.folio_unidad,limite_inferior:n.limite_inferior,limite_superior:n.limite_superior})}},{key:"datos_cuerpo_mi_moda",value:function(){return React.createElement("div",{style:{marginTop:"-23px"}},React.createElement("div",{style:estilo_tabla_modal},React.createElement("table",{className:"table"},React.createElement("thead",null,React.createElement("tr",{style:estilo_cabecera_tabla_fallos},React.createElement("td",null,"Fecha"),React.createElement("td",null,"Hora"),React.createElement("td",null,"Temperatura"))),React.createElement("tbody",null,this.datos))))}},{key:"empleados",value:function(){return React.createElement("div",{className:"container",style:{marginLeft:"5px",width:"725px"}},React.createElement("div",{"class":"input-group"},React.createElement("label",{"class":"input-group-addon"},"Atendio"),React.createElement("select",{required:!0,onChange:this.on_empleados,className:"form-control"},React.createElement("option",{value:"0"},"Seleccione un empleado"),this.opcion_empleados(this.state.nombrecompleto_usuario))),React.createElement("i",{onClick:this.guardar,style:{marginTop:"-4px"},value:"Guardar",className:"form-control btn btn-primary"},"  Guardar  ",React.createElement("span",{className:"fa fa-save"})))}},{key:"guardar",value:function(){if(this.state.id_scoi>0&&!this.state.observaciones==""){var n=conexion_ajax("servicios/datos_tabla.asmx/guardar_fallas",{folio_unidad:this.state.folio_unidad,estado:this.state.estado,observaciones:this.state.observaciones,id_scoi:this.state.id_scoi});this.state={folio_unidad:0,estado:"S",observaciones:"",id_scoi:0};document.getElementById("mi_modal").style.display="none";this.lista_fallos=conexion_ajax("servicios/datos_tabla.asmx/cargar_lista");console.log(this.state);this.setState({estado:"S",observaciones:"",id_scoi:""})}else alert("Hay campos sin llenar")}},{key:"opcion_empleados",value:function(){var n=this;return this.lista.map(function(t){return React.createElement("option",{value:t.id_scoi,selected:t.id_scoi==n.state.id_scoi},t.nombrecompleto_usuario)})}},{key:"on_empleados",value:function(n){this.setState({id_scoi:n.target.value})}},{key:"observaciones",value:function(){return React.createElement("div",null,React.createElement("textarea",{onChange:this.on_observaciones,value:this.state.observaciones,placeholder:" * Observaciones de reparacion",className:"textarea_tamaño"}))}},{key:"on_observaciones",value:function(n){this.setState({observaciones:n.target.value})}},{key:"datos_fallos",value:function(){var n=this,t=function(n){var t=n.estado=="S",i=n.estado=="R";return t?"Rojo":i?"verde":"amarillo"},i=function(n){var t=n=="S",i=n=="R";return t?"Sin revisar":i?"Revisado":"En revision"};return this.lista_fallos.map(function(r){return React.createElement("tr",{className:t(r),key:r.nombre_establecimiento,onClick:function(){return n.on_modal1(r)}},React.createElement("td",null,r.nombre_establecimiento),React.createElement("td",null,r.nombre_area),React.createElement("td",null,r.nombre_unidad),React.createElement("td",null,r.limite_inferior),React.createElement("td",null,r.limite_superior),React.createElement("td",null,i(r.estado)))})}},{key:"cabecera",value:function(){return console.log(this.state),React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"container"},React.createElement("div",{"class":"form-inline"},React.createElement("div",{"class":"input-group",style:{marginLeft:"5px",width:"32.9%"}},React.createElement("label",{"class":"input-group-addon"},"Establecimiento"),React.createElement("input",{disabled:!0,type:"text",size:"14",value:this.state.nombre_establecimiento,className:"form-control"})),React.createElement("div",{"class":"input-group has-feedback  ",style:{width:"32.9%"}},React.createElement("label",{"class":"input-group-addon"},"Area"),React.createElement("input",{disabled:!0,type:"text",size:"13",value:this.state.nombre_area,className:"form-control"})),React.createElement("div",{"class":"input-group has-feedback  ",style:{width:"32.9%"}},React.createElement("label",{"class":"input-group-addon"},"Unidad"),React.createElement("input",{disabled:!0,type:"text",size:"14",value:this.state.nombre_unidad,className:"form-control"}))),React.createElement("div",{"class":"form-inline",style:{marginTop:"-3px"}},React.createElement("div",{"class":"input-group  ",style:{marginLeft:"5px",width:"32.9%"}},React.createElement("label",{"class":"input-group-addon"},"Limite Superior"),React.createElement("input",{disabled:!0,type:"text",size:"8",value:this.state.limite_superior,className:"form-control"})),React.createElement("div",{"class":"input-group has-feedback",style:{width:"32.9%"}},React.createElement("label",{"class":"input-group-addon"},"Limite Inferior"),React.createElement("input",{disabled:!0,type:"text",size:"8",value:this.state.limite_inferior,className:"form-control"})),React.createElement("div",{"class":"input-group has-feedback",style:{width:"32.9%"}},React.createElement("label",{"class":"input-group-addon"},"Estado"),React.createElement("select",{onChange:this.on_estado,className:"form-control"},this.ver_estado(this.state.estado))))))}},{key:"ver_estado",value:function(n){var t=[];return n=="S"?t.push(React.createElement("option",{value:"S",selected:!0},"Sin Revisar"),React.createElement("option",{value:"E"},"En Revision"),React.createElement("option",{value:"R"},"Revisado")):n=="E"?t.push(React.createElement("option",{value:"S"},"Sin Revisar"),React.createElement("option",{value:"E",selected:!0},"En Revision"),React.createElement("option",{value:"R"},"Revisado")):t.push(React.createElement("option",{value:"S"},"Sin Revisar"),React.createElement("option",{value:"E"},"En Revision"),React.createElement("option",{value:"R",selected:!0},"Revisado")),t}},{key:"on_estado",value:function(n){this.setState({estado:n.target.value})}}]),t}(React.Component),Modal=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"modal",id:this.props.identidad},React.createElement("div",{className:"hijo_modal"},React.createElement("div",{className:"cavecera_modal"},React.createElement("span",{className:"glyphicon glyphicon-remove close",onClick:this.cerrar.bind(this)}),this.props.cavecera),React.createElement("div",{className:"cuerpo_"},this.props.cuerpo),React.createElement("div",{className:"rodilla"},this.props.rodilla),React.createElement("div",{className:"pie"},this.props.pie)))}},{key:"cerrar",value:function(){document.getElementById(this.props.identidad).style.display="none"}}]),t}(React.Component),Tablero=function(n){function t(){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement(Tabla,null),React.createElement(Tabla_fallos,null))}}]),t}(React.Component),estilo_cabecera_tabla={position:"sticky","min-width":"100%",top:"-1px",background:"rgba(146, 199, 254)"},estilo_cabecera_tabla_fallos={position:"sticky","min-width":"100%",top:"-1px",background:"#dea83e"},estilo_tabla={"overflow-x":"auto","overflow-y":"auto",width:"100%",height:"300px",border:"solid 1px gray","border-radius":"10px"},estilo_tabla_modal={"overflow-x":"auto","overflow-y":"auto",width:"722px",height:"180px",border:"solid 1px gray","border-radius":"5px","margin-left":"7px"};ReactDOM.render(React.createElement(Tablero,null),document.getElementById("pruebas"));