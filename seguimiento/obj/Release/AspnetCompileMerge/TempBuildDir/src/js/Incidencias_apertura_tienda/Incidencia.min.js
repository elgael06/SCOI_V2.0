"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},$MI_URL=window.location.protocol+"//"+window.location.hostname,$URL_API=$MI_URL+":90/api/",Incicencias_apertura=function(n){function t(n){var i=this;_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={carga:1,Folio:4,Fecha:"",establecimientos:[],incidencias:[],seleccion:{}};this.obtener_estableciminetos();setTimeout(function(){return i.efectoCarga(0)},1e3)}return _inherits(t,n),_createClass(t,[{key:"on_estableciminento",value:function(n){var t=n.target.value;console.log("Folio="+t);this.setState({Folio:t,incidencias:[]})}},{key:"on_recargar",value:function(){console.log("Recargar");this.state.Fecha!=""?this.obtener_incidencias():alert("Seleccione Fecha...")}},{key:"on_fecha",value:function(n){var t=this.parseo_fecha(n.target.value);console.log("Fecha="+t);this.setState({Fecha:t,incidencias:[]})}},{key:"on_resultados",value:function(){console.log("resultados")}},{key:"on_seleccion_departamento",value:function(n){document.querySelector("#modal_incidencias").style.display="flex";console.log(n);this.setState({seleccion:n})}},{key:"parseo_fecha",value:function(n){return n=n.split("-"),n[2]+"-"+n[1]+"-"+n[0]}},{key:"llenar_estableciminetos",value:function(n){console.log(n);var t=n[0].folio;this.setState({establecimientos:n,Folio:t})}},{key:"llenar_incidencias",value:function(n){var t=this;console.log(n);setTimeout(function(){return t.efectoCarga(0)},500);n.length>0?this.setState({incidencias:n}):alert("Sin Datos A Mostrar!!!")}},{key:"efectoCarga",value:function(n){this.setState({carga:n})}},{key:"obtener_incidencias",value:function(){var r=this,n=this.state,t=n.Folio,i=n.Fecha;this.efectoCarga(1);console.log(t,i);fetch($URL_API+"IncidenciasObservacionesApertura?Folio="+t+"&Fecha="+i,{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(n){return n.json().then(function(n){return r.llenar_incidencias(n.Observaciones)})})["catch"](function(n){return console.log("error=>",n)})}},{key:"obtener_estableciminetos",value:function(){var n=this;fetch($URL_API+"obtener_establecimientos",{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json().then(function(t){return n.llenar_estableciminetos(t)})})["catch"](function(n){return console.log("error=>",n)})}},{key:"render",value:function(){var n=this,t=this.state,i=t.establecimientos,r=t.incidencias,u=t.carga,f=t.seleccion;return React.createElement("div",{className:"panel panel-default"},React.createElement(Cavecera,{estableciminetos:i,evEstablecimiento:function(t){return n.on_estableciminento(t)},evRecargar:function(){return n.on_recargar()},evFecha:function(t){return n.on_fecha(t)},evResultados:function(){return n.on_resultados()}}),React.createElement(Departamentos,{departamentos:r,evSeleccion:function(t){return n.on_seleccion_departamento(t)}}),React.createElement(IncidenciasDepartamento,{titulo:f.Cuestionario||"NA"}),React.createElement(EfectoCargar,{estatus:u}))}}]),t}(React.Component),Cavecera=function(n){var t=n.estableciminetos,i=n.evEstablecimiento,r=n.evRecargar,u=n.evFecha,f=n.evResultados;return React.createElement("div",{className:"panel-heading"},React.createElement("strong",null,"Incidencias"),React.createElement("hr",null),React.createElement("select",{className:"form-control",onChange:i,style:{width:"280px",display:"inline-block"}},t.map(function(n){return React.createElement("option",{value:n.folio},n.nombre)})),React.createElement("i",{className:"btn btn-success fa fa-refresh",style:{marginLeft:"10px",fontSize:"16px",borderRadius:"20px"},onClick:r}),React.createElement("input",{type:"date",className:"btn btn-default",onChange:u,style:{marginLeft:"10px"}}),React.createElement("i",{className:"btn btn-primary fa fa-table",style:{marginLeft:"10px",fontSize:"20px"},onClick:f}))},Departamentos=function(n){var t=n.departamentos,i=n.evSeleccion,r=function(n){var t=n.departamento,r=function(n){return n>0?"#eea236":"#FFFFFF"};return React.createElement("div",{className:"viewDepartamento",onClick:function(){return i(t)}},React.createElement("strong",{className:"fa fa-list",style:{float:"left",padding:"10px",fontSize:"25px"}}),React.createElement("h4",{style:{borderBottom:"solid 15px "+r(t.NoResueltas)}},t.Cuestionario),React.createElement("span",{className:"contenedor_indicadores_por_departamento"},React.createElement("label",{className:"btn btn-success"},t.Solucionadas,React.createElement("i",{className:"fa fa-calendar-check-o"})),React.createElement("label",{className:"btn btn-default"},t.NoAplica,React.createElement("i",{className:" \tfa fa-calendar-minus-o"})),React.createElement("label",{className:"btn btn-warning"},t.NoResueltas,React.createElement("i",{className:"fa fa-calendar-o"})),React.createElement("label",{className:"btn btn-danger"},t.SinSolucion,React.createElement("i",{className:"fa fa-calendar-times-o"}))))};return React.createElement("div",{className:"panel-body",id:"contenedor_viewDepartamentos"},t.map(function(n){return React.createElement(r,{departamento:n})}))},IncidenciasDepartamento=function(n){var t=n.titulo,i=function(){document.querySelector("#modal_incidencias").style.display="none"};return React.createElement("div",{className:"animate",id:"modal_incidencias"},React.createElement("div",{className:"panel panel-info"},React.createElement("div",{className:"panel-heading"},React.createElement("i",{className:"fa fa-close close",onClick:i}),React.createElement("h4",null,React.createElement("i",{className:"fa fa-edit"}),"  ",t)),React.createElement("div",{className:"panel-body"})))};location.protocol!="http:"&&(location.protocol="http:");ReactDOM.render(React.createElement(Incicencias_apertura,null),document.querySelector("#root"));